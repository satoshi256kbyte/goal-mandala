#!/bin/bash

# ユーザビリティテストスクリプト
# サブ目標・アクション入力フォーム機能のユーザビリティを検証

set -e

echo "🧪 ユーザビリティテストを開始します..."
echo "========================================"

# 1. 実際のユーザーフローテスト（E2E）
echo "👤 実際のユーザーフローテスト実行中..."
echo "  - サブ目標編集フロー"
echo "  - アクション編集フロー"
echo "  - ドラッグ&ドロップ操作"
echo "  - 一括編集操作"
npm run test:e2e:subgoal-action
echo "✅ ユーザーフローテスト完了"
echo ""

# 2. 操作性の確認（アクセシビリティテスト）
echo "♿ 操作性・アクセシビリティテスト実行中..."
echo "  - キーボード操作"
echo "  - スクリーンリーダー対応"
echo "  - フォーカス管理"
echo "  - ARIA属性"
npm run test:accessibility:e2e
echo "✅ 操作性テスト完了"
echo ""

# 3. エラーメッセージの分かりやすさ確認
echo "⚠️ エラーメッセージテスト実行中..."
echo "  - バリデーションエラー表示"
echo "  - ネットワークエラー表示"
echo "  - 復旧手順の明確性"
npm run test:e2e -- --grep "エラー"
echo "✅ エラーメッセージテスト完了"
echo ""

# 4. レスポンス時間の確認
echo "⚡ レスポンス時間テスト実行中..."
echo "  - フォーム表示速度"
echo "  - バリデーション応答速度"
echo "  - 保存処理速度"
npm run test:performance
echo "✅ レスポンス時間テスト完了"
echo ""

echo "🎉 全てのユーザビリティテストが完了しました！"
echo "========================================"
echo "📋 テスト項目:"
echo "  ✅ 実際のユーザーフローテスト"
echo "  ✅ 操作性・アクセシビリティ"
echo "  ✅ エラーメッセージの分かりやすさ"
echo "  ✅ レスポンス時間"
echo ""
echo "📊 詳細なテスト結果は test-results/ ディレクトリで確認できます"
