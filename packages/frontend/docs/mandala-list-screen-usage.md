# マンダラチャート一覧画面 使用方法ガイド

## 概要

マンダラチャート一覧画面は、ユーザーが作成した全てのマンダラチャートを一覧表示し、検索・フィルター・ソート機能を提供する画面です。このガイドでは、画面の使用方法と主要機能について説明します。

## 画面へのアクセス

### URL

- パス: `/`
- 認証: 必須
- プロフィール設定: 必須

### アクセス条件

1. ログイン済みであること
2. プロフィール設定が完了していること

未認証の場合はログイン画面へ、プロフィール未設定の場合はプロフィール入力画面へ自動的にリダイレクトされます。

## 画面構成

### ヘッダー

- **ロゴ**: クリックでTOP画面に戻る
- **検索バー**: マンダラチャートを検索
- **ユーザーメニュー**: 設定・ログアウト

### フィルターバー

- **状態フィルター**: 目標状態でフィルタリング
- **ソートドロップダウン**: 並び替え条件を選択
- **新規作成ボタン**: 新しいマンダラチャートを作成

### マンダラグリッド

- **マンダラカード**: 各マンダラチャートの概要を表示
- **レスポンシブレイアウト**: デバイスに応じて1〜3カラム表示

### ページネーション

- **ページ番号**: 現在のページと総ページ数を表示
- **前へ/次へボタン**: ページ遷移

## 主要機能

### 1. マンダラチャート一覧表示

#### 表示内容

各マンダラカードには以下の情報が表示されます：

- **タイトル**: 目標タイトル（最大2行、超過時は省略記号）
- **説明**: 目標説明（最大3行、超過時は省略記号）
- **進捗率**: 円形プログレスバーで視覚的に表示
  - 0-30%: 赤色
  - 31-70%: 黄色
  - 71-100%: 緑色
- **状態バッジ**: 目標の現在の状態
  - 下書き（グレー）
  - 活動中（青）
  - 完了（緑）
  - 一時停止（オレンジ）
  - 中止（赤）
- **達成期限**: 目標の達成期限日
- **期限切れ警告**: 期限が過ぎている場合に表示
- **作成日時**: マンダラチャートの作成日
- **更新日時**: 最終更新日

#### カード操作

- **クリック**: マンダラチャート詳細画面へ遷移
- **ホバー**: カードがハイライト表示
- **キーボード操作**: Enterキーで選択可能

### 2. 検索機能

#### 使用方法

1. 画面上部の検索バーにキーワードを入力
2. 入力した内容がリアルタイムで反映される
3. 目標タイトルと目標説明を対象に部分一致検索

#### 検索のクリア

- 検索バー右側の「×」ボタンをクリック
- または検索バーの内容を削除

#### 検索結果

- **結果あり**: 一致するマンダラチャートのみ表示
- **結果なし**: 「該当するマンダラチャートが見つかりませんでした」と表示

### 3. フィルター機能

#### 使用方法

1. フィルタードロップダウンをクリック
2. 表示したい状態を選択

#### フィルター選択肢

- **全て**: 全てのマンダラチャートを表示（デフォルト）
- **下書き**: 下書き状態のマンダラチャートのみ
- **活動中**: 活動中のマンダラチャートのみ
- **完了**: 完了したマンダラチャートのみ
- **一時停止**: 一時停止中のマンダラチャートのみ
- **中止**: 中止したマンダラチャートのみ

#### フィルター結果

- 選択した状態のマンダラチャートのみが表示される
- 結果がない場合は空状態メッセージを表示

### 4. ソート機能

#### 使用方法

1. ソートドロップダウンをクリック
2. 並び替え条件を選択

#### ソート選択肢

- **作成日時（新しい順）**: デフォルト
- **作成日時（古い順)**
- **更新日時（新しい順）**
- **更新日時（古い順）**
- **達成期限（近い順）**
- **達成期限（遠い順）**
- **進捗率（高い順）**
- **進捗率（低い順）**

#### ソート結果

- 選択した条件で即座に並び替えられる
- ページネーションは1ページ目にリセット

### 5. ページネーション

#### 使用方法

- **次へボタン**: 次のページへ移動
- **前へボタン**: 前のページへ移動
- **ページ番号**: 特定のページへ直接移動

#### ページ情報

- 1ページあたり20件のマンダラチャートを表示
- 現在のページ番号と総ページ数を表示
- 最初のページでは「前へ」ボタンが無効化
- 最後のページでは「次へ」ボタンが無効化

### 6. 新規作成

#### 使用方法

1. 画面右上の「新規作成」ボタンをクリック
2. 目標入力画面へ遷移

#### 空状態からの作成

マンダラチャートが1件もない場合：

1. 空状態メッセージが表示される
2. 「新規作成」ボタンをクリック
3. 目標入力画面へ遷移

### 7. ユーザーメニュー

#### 使用方法

1. 画面右上のユーザーメニューアイコンをクリック
2. ドロップダウンメニューが表示される

#### メニュー項目

- **ユーザー名**: 現在ログイン中のユーザー名を表示
- **設定**: ユーザー設定画面へ遷移
- **ログアウト**: ログアウト処理を実行し、ログイン画面へリダイレクト

## レスポンシブ対応

### モバイル（< 768px）

- 1カラムグリッド表示
- 検索・フィルター・ソートを縦方向に配置
- タッチ操作に適したボタンサイズ（最小44px × 44px）

### タブレット（768px - 1024px）

- 2カラムグリッド表示
- 検索・フィルター・ソートを横方向に配置

### デスクトップ（> 1024px）

- 3カラムグリッド表示
- 全機能を横方向に配置
- 最大幅7xlコンテナ

## アクセシビリティ

### キーボード操作

- **Tab**: 次の要素へフォーカス移動
- **Shift + Tab**: 前の要素へフォーカス移動
- **Enter**: マンダラカードを選択
- **Space**: マンダラカードを選択
- **Escape**: ドロップダウンを閉じる

### スクリーンリーダー対応

- 各マンダラカードの内容が適切に読み上げられる
- 進捗率が「進捗率XX%」として読み上げられる
- 状態バッジが「状態: 活動中」として読み上げられる
- ローディング状態とエラーメッセージが通知される

### フォーカスインジケーター

- フォーカスが移動すると明確なインジケーターが表示される
- 青色のアウトラインで視覚的に識別可能

## パフォーマンス

### ページロード時間

- 初回ロード: < 3秒
- 検索・フィルター・ソート: < 500ms
- ページネーション: < 1秒

### 最適化機能

- コンポーネントのメモ化
- 検索のデバウンス（300ms）
- 画像の遅延読み込み
- コード分割

## エラーハンドリング

### エラー表示

エラーが発生した場合、画面上部にエラーメッセージが表示されます：

- **データ取得エラー**: 「データの取得に失敗しました。もう一度お試しください。」
- **ネットワークエラー**: 「ネットワークエラーが発生しました。接続を確認してください。」
- **認証エラー**: ログイン画面へ自動リダイレクト

### 再試行

エラーメッセージと共に「再試行」ボタンが表示され、クリックするとデータ取得を再実行します。

## よくある質問

### Q1: マンダラチャートが表示されない

**A**: 以下を確認してください：

1. ログインしているか
2. プロフィール設定が完了しているか
3. マンダラチャートを作成済みか
4. フィルター条件が適切か

### Q2: 検索結果が表示されない

**A**: 以下を確認してください：

1. 検索キーワードが正しいか
2. フィルター条件と組み合わせていないか
3. 該当するマンダラチャートが存在するか

### Q3: ページネーションが表示されない

**A**: マンダラチャートが20件以下の場合、ページネーションは表示されません。

### Q4: 進捗率が更新されない

**A**: ブラウザをリロードしてください。それでも更新されない場合は、マンダラチャート詳細画面で進捗を確認してください。

## トラブルシューティング

詳細なトラブルシューティングについては、[トラブルシューティングガイド](./mandala-list-screen-troubleshooting.md)を参照してください。

## 関連ドキュメント

- [APIドキュメント](./mandala-list-screen-api.md)
- [トラブルシューティングガイド](./mandala-list-screen-troubleshooting.md)
- [コンポーネントガイド](./mandala-list-screen-components.md)
