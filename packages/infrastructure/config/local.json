{
  "stackPrefix": "goal-mandala-local",
  "region": "ap-northeast-1",
  "environment": "local",
  "network": {
    "natGateways": 1,
    "enableVpcEndpoints": false,
    "vpcCidr": "10.0.0.0/16",
    "maxAzs": 2
  },
  "database": {
    "instanceClass": "serverless",
    "minCapacity": 0.5,
    "maxCapacity": 1.0,
    "multiAz": false,
    "backupRetentionDays": 1,
    "deletionProtection": false,
    "performanceInsights": false,
    "monitoringInterval": 0,
    "enableAuditLog": false,
    "enableSlowQueryLog": true,
    "slowQueryLogThreshold": 5000,
    "databaseName": "goalmandalamain",
    "enableEncryption": true,
    "enableIamDatabaseAuthentication": false,
    "enableSslConnection": true,
    "enableAutomaticSnapshots": false,
    "snapshotRetentionDays": 1,
    "preferredBackupWindow": "03:00-04:00",
    "preferredMaintenanceWindow": "sun:04:00-sun:05:00",
    "tags": {
      "DatabaseType": "aurora-serverless-v2",
      "Engine": "postgresql",
      "EngineVersion": "15.4",
      "Purpose": "application-data",
      "Tier": "development"
    },
    "enableRotation": false,
    "rotationIntervalDays": 30
  },
  "secretsManager": {
    "enableEncryption": true,
    "enableRotation": false,
    "rotationIntervalDays": 30,
    "enableCaching": false,
    "cacheTtlMinutes": 5,
    "enableMonitoring": false,
    "tags": {
      "Component": "secrets-manager",
      "Purpose": "application-secrets",
      "Tier": "development"
    }
  },
  "cognito": {
    "userPool": {
      "passwordPolicy": {
        "minLength": 6,
        "requireLowercase": false,
        "requireUppercase": false,
        "requireNumbers": false,
        "requireSymbols": false,
        "tempPasswordValidityDays": 7
      },
      "selfSignUpEnabled": true,
      "autoVerify": ["email"],
      "standardAttributes": {
        "email": {
          "required": true,
          "mutable": true
        },
        "name": {
          "required": true,
          "mutable": true
        }
      },
      "customAttributes": {
        "industry": {
          "mutable": true
        },
        "company_size": {
          "mutable": true
        },
        "job_title": {
          "mutable": true
        },
        "position": {
          "mutable": true
        }
      },
      "emailSettings": {
        "fromEmail": "noreply@localhost",
        "fromName": "Goal Mandala Local",
        "replyToEmail": "support@localhost"
      },
      "accountRecovery": ["verified_email"],
      "deletionProtection": false,
      "security": {
        "enableAdvancedSecurity": false,
        "enableCompromisedCredentialsCheck": false,
        "enableRiskBasedAccessControl": false,
        "mfaConfiguration": "OFF",
        "mfaTypes": [],
        "deviceConfiguration": {
          "challengeRequiredOnNewDevice": false,
          "deviceOnlyRememberedOnUserPrompt": false
        },
        "userInvitation": {
          "emailSubject": "Goal Mandala Local - アカウント作成のご案内",
          "emailMessage": "Goal Mandala Localへようこそ！\n\nユーザー名: {username}\n一時パスワード: {####}\n\n初回ログイン時にパスワードの変更が必要です。",
          "smsMessage": "Goal Mandala Local - ユーザー名: {username} 一時パスワード: {####}"
        },
        "verification": {
          "emailSubject": "Goal Mandala Local - メールアドレス確認",
          "emailMessage": "Goal Mandala Localのメールアドレス確認コード: {####}",
          "smsMessage": "Goal Mandala Local確認コード: {####}"
        }
      }
    },
    "userPoolClient": {
      "authFlows": {
        "allowUserSrpAuth": true,
        "allowRefreshTokenAuth": true,
        "allowUserPasswordAuth": true,
        "allowAdminUserPasswordAuth": false,
        "allowCustomAuth": false
      },
      "tokenValidity": {
        "accessToken": 60,
        "idToken": 60,
        "refreshToken": 43200
      },
      "oAuth": {
        "flows": {
          "authorizationCodeGrant": true,
          "implicitCodeGrant": false,
          "clientCredentials": false
        },
        "scopes": ["openid", "email", "profile"],
        "callbackUrls": ["http://localhost:3000/auth/callback", "http://localhost:3000/"],
        "logoutUrls": ["http://localhost:3000/auth/logout", "http://localhost:3000/"]
      },
      "preventUserExistenceErrors": false,
      "enableTokenRevocation": false,
      "generateSecret": false,
      "supportedIdentityProviders": ["COGNITO"],
      "readAttributes": [
        "email",
        "name",
        "custom:industry",
        "custom:company_size",
        "custom:job_title",
        "custom:position"
      ],
      "writeAttributes": [
        "name",
        "custom:industry",
        "custom:company_size",
        "custom:job_title",
        "custom:position"
      ],
      "explicitAuthFlows": [
        "ALLOW_USER_SRP_AUTH",
        "ALLOW_REFRESH_TOKEN_AUTH",
        "ALLOW_USER_PASSWORD_AUTH"
      ],
      "enablePropagateAdditionalUserContextData": false,
      "authSessionValidity": 3
    },
    "tags": {
      "Component": "cognito",
      "Purpose": "user-authentication",
      "Tier": "local"
    },
    "iam": {
      "lambdaRole": {
        "enableDetailedLogging": true,
        "cognitoPermissions": {
          "userOperations": {
            "enabled": true,
            "actions": [
              "cognito-idp:GetUser",
              "cognito-idp:ListUsers",
              "cognito-idp:AdminGetUser",
              "cognito-idp:AdminUpdateUserAttributes",
              "cognito-idp:AdminSetUserPassword",
              "cognito-idp:AdminCreateUser",
              "cognito-idp:AdminDeleteUser",
              "cognito-idp:AdminDisableUser",
              "cognito-idp:AdminEnableUser"
            ]
          },
          "groupOperations": {
            "enabled": true,
            "actions": [
              "cognito-idp:ListGroups",
              "cognito-idp:GetGroup",
              "cognito-idp:AdminListGroupsForUser",
              "cognito-idp:AdminAddUserToGroup",
              "cognito-idp:AdminRemoveUserFromGroup"
            ]
          },
          "authOperations": {
            "enabled": true,
            "actions": [
              "cognito-idp:InitiateAuth",
              "cognito-idp:RespondToAuthChallenge",
              "cognito-idp:ConfirmSignUp",
              "cognito-idp:ResendConfirmationCode",
              "cognito-idp:ForgotPassword",
              "cognito-idp:ConfirmForgotPassword"
            ]
          },
          "adminOperations": {
            "enabled": true,
            "actions": [
              "cognito-idp:AdminConfirmSignUp",
              "cognito-idp:AdminInitiateAuth",
              "cognito-idp:AdminRespondToAuthChallenge",
              "cognito-idp:AdminResetUserPassword",
              "cognito-idp:AdminSetUserMFAPreference"
            ]
          }
        },
        "additionalPolicies": {
          "sesAccess": {
            "enabled": false,
            "actions": ["ses:SendEmail", "ses:SendRawEmail"]
          },
          "secretsManagerAccess": {
            "enabled": true,
            "actions": ["secretsmanager:GetSecretValue"]
          },
          "logsAccess": {
            "enabled": true,
            "actions": ["logs:CreateLogGroup", "logs:CreateLogStream", "logs:PutLogEvents"]
          }
        },
        "resourceRestrictions": {
          "enableResourceBasedAccess": false,
          "allowedUserPoolArns": ["*"],
          "allowedSecretArns": ["*"]
        }
      }
    }
  },
  "lambda": {
    "timeout": 30,
    "memorySize": 256
  },
  "frontend": {
    "domainName": null,
    "certificateArn": null,
    "customErrorResponses": true,
    "security": {
      "enableHsts": false,
      "hstsMaxAge": 31536000,
      "hstsIncludeSubdomains": false,
      "hstsPreload": false,
      "enableContentTypeOptions": true,
      "enableFrameOptions": true,
      "frameOptionsValue": "DENY",
      "enableReferrerPolicy": true,
      "referrerPolicyValue": "strict-origin-when-cross-origin",
      "enableCsp": false,
      "cspDirectives": {
        "default-src": ["'self'"],
        "script-src": ["'self'", "'unsafe-inline'"],
        "style-src": ["'self'", "'unsafe-inline'"],
        "img-src": ["'self'", "data:", "https:"],
        "font-src": ["'self'", "https:"],
        "connect-src": ["'self'"],
        "frame-ancestors": ["'none'"]
      },
      "customHeaders": {
        "X-Custom-Header": "goal-mandala-local"
      }
    },
    "s3": {
      "enableVersioning": false,
      "enableLogging": false,
      "lifecyclePolicyEnabled": false,
      "oldVersionExpirationDays": 7,
      "incompleteMultipartUploadDays": 1
    },
    "monitoring": {
      "enableAccessLogs": false,
      "enableCloudFrontLogs": false,
      "enableCostMonitoring": false,
      "logRetentionDays": 7,
      "retainLogsOnDelete": false,
      "alertEmail": null,
      "slackWebhookUrl": null,
      "errorRateThreshold": 20,
      "cacheHitRateThreshold": 50,
      "s3RequestsThreshold": 5000,
      "monthlyBudgetLimit": 10
    }
  },
  "monitoring": {
    "logRetentionDays": 7,
    "enableDetailedMonitoring": false,
    "enableAlerts": false,
    "alertEmail": null
  },
  "tags": {
    "Project": "GoalMandala",
    "Environment": "local",
    "CostCenter": "development",
    "Owner": "development-team",
    "Purpose": "local-development",
    "DataClassification": "internal",
    "BackupRequired": "false"
  }
}
