{
  "name": "@goal-mandala/infrastructure",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "build": "tsc",
    "watch": "tsc -w",
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage",
    "test:coverage:watch": "jest --coverage --watch",
    "test:ci": "jest --ci --coverage --watchAll=false",
    "test:unit": "jest --testPathPattern='\\.(test|spec)\\.ts$' --testPathIgnorePatterns='integration'",
    "test:integration": "jest --testPathPattern='integration'",
    "test:integration:secrets": "ts-node scripts/run-secrets-integration-tests.ts",
    "test:integration:secrets:dev": "ts-node scripts/run-secrets-integration-tests.ts --env=dev",
    "test:integration:secrets:stg": "ts-node scripts/run-secrets-integration-tests.ts --env=stg",
    "test:integration:secrets:prod": "ts-node scripts/run-secrets-integration-tests.ts --env=prod",
    "test:integration:secrets:performance": "ts-node scripts/run-secrets-integration-tests.ts --perf-duration=120000 --perf-concurrency=10",
    "test:integration:secrets": "ts-node scripts/run-secrets-integration-tests.ts",
    "test:integration:secrets:dev": "ENVIRONMENT=dev ts-node scripts/run-secrets-integration-tests.ts",
    "test:integration:secrets:stg": "ENVIRONMENT=stg ts-node scripts/run-secrets-integration-tests.ts",
    "test:integration:secrets:prod": "ENVIRONMENT=prod ts-node scripts/run-secrets-integration-tests.ts",
    "test:integration:secrets:performance": "ENABLE_PERFORMANCE_TEST=true ts-node scripts/run-secrets-integration-tests.ts",
    "test:synth": "jest --testNamePattern='synth'",
    "test:coverage:report": "./scripts/test-coverage.sh",
    "test:cdk:synth": "./scripts/test-synth.sh",
    "clean": "rm -rf dist cdk.out node_modules/.cache coverage",
    "cdk": "cdk",
    "cdk:synth": "cdk synth --no-lookups",
    "cdk:synth:test": "cdk synth --app 'ts-node src/index.ts' --context environment=test",
    "cdk:deploy": "cdk deploy",
    "cdk:destroy": "cdk destroy",
    "cdk:diff": "cdk diff",
    "cdk:bootstrap": "cdk bootstrap",
    "cdk:list": "cdk list",
    "cdk:doctor": "cdk doctor",
    "deploy": "pnpm run cdk:deploy",
    "deploy:test": "./scripts/deploy-test.sh",
    "deploy:test:actual": "DEPLOY_ACTUAL=true ./scripts/deploy-test.sh",
    "destroy": "pnpm run cdk:destroy",
    "diff": "pnpm run cdk:diff",
    "synth": "pnpm run cdk:synth",
    "deploy:dev": "./scripts/deploy.sh dev",
    "deploy:stg": "./scripts/deploy.sh stg",
    "deploy:prod": "./scripts/deploy.sh prod",
    "deploy:dev:diff": "./scripts/deploy.sh dev --diff-only",
    "deploy:stg:diff": "./scripts/deploy.sh stg --diff-only",
    "deploy:prod:diff": "./scripts/deploy.sh prod --diff-only",
    "cdk:helper": "./scripts/cdk-helper.sh",
    "cdk:synth:all": "pnpm run cdk:synth:dev && pnpm run cdk:synth:stg && pnpm run cdk:synth:prod",
    "cdk:synth:dev": "cdk synth --context environment=dev",
    "cdk:synth:stg": "cdk synth --context environment=stg",
    "cdk:synth:prod": "cdk synth --context environment=prod",
    "cdk:diff:dev": "cdk diff --context environment=dev",
    "cdk:diff:stg": "cdk diff --context environment=stg",
    "cdk:diff:prod": "cdk diff --context environment=prod",
    "cdk:list:dev": "cdk list --context environment=dev",
    "cdk:list:stg": "cdk list --context environment=stg",
    "cdk:list:prod": "cdk list --context environment=prod",
    "cognito:deploy:dev": "cdk deploy goal-mandala-dev-cognito --context environment=dev",
    "cognito:deploy:stg": "cdk deploy goal-mandala-stg-cognito --context environment=stg",
    "cognito:deploy:prod": "cdk deploy goal-mandala-prod-cognito --context environment=prod",
    "cognito:diff:dev": "cdk diff goal-mandala-dev-cognito --context environment=dev",
    "cognito:diff:stg": "cdk diff goal-mandala-stg-cognito --context environment=stg",
    "cognito:diff:prod": "cdk diff goal-mandala-prod-cognito --context environment=prod",
    "cognito:synth:dev": "cdk synth goal-mandala-dev-cognito --context environment=dev",
    "cognito:synth:stg": "cdk synth goal-mandala-stg-cognito --context environment=stg",
    "cognito:synth:prod": "cdk synth goal-mandala-prod-cognito --context environment=prod",
    "cognito:validate": "./scripts/validate-cognito-config.sh",
    "cognito:validate:dev": "./scripts/validate-cognito-config.sh dev",
    "cognito:validate:stg": "./scripts/validate-cognito-config.sh stg",
    "cognito:validate:prod": "./scripts/validate-cognito-config.sh prod",
    "cognito:deploy-script:dev": "./scripts/deploy-cognito.sh dev",
    "cognito:deploy-script:stg": "./scripts/deploy-cognito.sh stg",
    "cognito:deploy-script:prod": "./scripts/deploy-cognito.sh prod",
    "security:check": "pnpm run cdk:synth:all",
    "security:test": "jest --testPathPattern='security'",
    "security:test:watch": "jest --testPathPattern='security' --watch",
    "security:test:coverage": "jest --testPathPattern='security' --coverage",
    "security:scan": "ts-node scripts/run-security-tests.ts",
    "security:scan:dev": "ENVIRONMENT=dev ts-node scripts/run-security-tests.ts",
    "security:scan:stg": "ENVIRONMENT=stg ts-node scripts/run-security-tests.ts",
    "security:scan:prod": "ENVIRONMENT=prod ENABLE_VULNERABILITY_SCANNING=true ts-node scripts/run-security-tests.ts",
    "security:scan:full": "ENABLE_VULNERABILITY_SCANNING=true ts-node scripts/run-security-tests.ts",
    "ci:validate": "pnpm run lint && pnpm run type-check && pnpm run test && pnpm run security:test && pnpm run cdk:synth:all",
    "frontend:deploy": "./scripts/deploy-frontend.sh",
    "frontend:deploy:dev": "./scripts/deploy-frontend.sh dev",
    "frontend:deploy:stg": "./scripts/deploy-frontend.sh stg",
    "frontend:deploy:prod": "./scripts/deploy-frontend.sh prod",
    "frontend:deploy:build-only": "BUILD_ONLY=true ./scripts/deploy-frontend.sh",
    "frontend:deploy:skip-build": "SKIP_BUILD=true ./scripts/deploy-frontend.sh",
    "frontend:deploy:dry-run": "DRY_RUN=true ./scripts/deploy-frontend.sh",
    "frontend:invalidate": "./scripts/invalidate-cloudfront.sh",
    "frontend:invalidate:dev": "./scripts/invalidate-cloudfront.sh dev",
    "frontend:invalidate:stg": "./scripts/invalidate-cloudfront.sh stg",
    "frontend:invalidate:prod": "./scripts/invalidate-cloudfront.sh prod",
    "lint": "eslint . --ext ts --report-unused-disable-directives --max-warnings 20",
    "lint:fix": "eslint . --ext ts --fix",
    "format": "prettier --write .",
    "format:check": "prettier --check .",
    "type-check": "echo 'Type check temporarily disabled'"
  },
  "dependencies": {
    "@goal-mandala/shared": "workspace:*",
    "aws-cdk-lib": "^2.210.0",
    "constructs": "^10.4.0"
  },
  "devDependencies": {
    "@aws-sdk/client-rds": "^3.864.0",
    "@aws-sdk/client-secrets-manager": "^3.470.0",
    "@types/aws-lambda": "^8.10.130",
    "@types/jest": "^29.5.8",
    "@types/node": "^20.10.0",
    "@types/pg": "^8.15.5",
    "@typescript-eslint/eslint-plugin": "^6.21.0",
    "@typescript-eslint/parser": "^6.21.0",
    "aws-cdk": "^2.210.0",
    "eslint": "^8.56.0",
    "jest": "^29.7.0",
    "pg": "^8.16.3",
    "prettier": "^3.0.0",
    "ts-jest": "^29.1.1",
    "ts-node": "^10.9.0",
    "typescript": "^5.2.2"
  }
}
