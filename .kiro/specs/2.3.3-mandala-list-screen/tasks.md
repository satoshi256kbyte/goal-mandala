# 実装タスクリスト

## 概要

このタスクリストは、マンダラチャート一覧画面（TOP画面）の実装を段階的に進めるためのものです。各タスクは独立して実装・テスト可能な単位に分割されており、要件と設計に基づいて実装します。

## タスク一覧

- [x] 1. プロジェクト基盤とセットアップ
  - 型定義ファイルの作成（MandalaChartSummary、GoalStatus、SortOption等）
  - 定数定義ファイルの作成（ソート選択肢、フィルター選択肢、ページサイズ等）
  - ディレクトリ構造の整備（components/mandala-list、hooks、services）
  - _要件: 全要件_

- [x] 2. 基本コンポーネントの実装
  - [x] 2.1 StatusBadgeコンポーネントの実装
    - 状態バッジの表示実装
    - 状態に応じた色分け実装（draft/active/completed/paused/cancelled）
    - プロパティの定義と受け渡し
    - _要件: 2.6, 2.7, 2.8, 2.9, 2.10_
  - [x] 2.2 ProgressCircleコンポーネントの実装
    - 円形プログレスバーの実装
    - 進捗率に応じた色分け実装（0-30%: 赤、31-70%: 黄、71-100%: 緑）
    - SVGによる円グラフ描画
    - プロパティの定義と受け渡し
    - _要件: 2.2, 2.3, 2.4, 2.5_
  - [x] 2.3 SearchBarコンポーネントの実装
    - 検索入力フィールドの実装
    - 検索クリアボタンの実装
    - プレースホルダーの表示
    - プロパティの定義と受け渡し
    - _要件: 5.1, 5.2, 5.3, 5.4, 5.5, 5.6, 5.7_
  - [x] 2.4 StatusFilterコンポーネントの実装
    - 状態フィルタードロップダウンの実装
    - フィルター選択肢の表示
    - プロパティの定義と受け渡し
    - _要件: 6.1, 6.2, 6.3, 6.4, 6.5, 6.6_
  - [x] 2.5 SortDropdownコンポーネントの実装
    - ソートドロップダウンの実装
    - ソート選択肢の表示
    - プロパティの定義と受け渡し
    - _要件: 7.1, 7.2, 7.3, 7.4, 7.5, 7.6_

- [x] 2.6 基本コンポーネントのユニットテスト
  - StatusBadgeのテスト作成
  - ProgressCircleのテスト作成
  - SearchBarのテスト作成
  - StatusFilterのテスト作成
  - SortDropdownのテスト作成
  - _要件: 全要件_


- [x] 3. MandalaCardコンポーネントの実装
  - [x] 3.1 カード基本構造の実装
    - カードレイアウトの実装
    - カードヘッダー・ボディ・フッターの実装
    - ホバー・フォーカス効果の実装
    - _要件: 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8_
  - [x] 3.2 カード内容の実装
    - タイトル表示の実装（最大2行、省略記号）
    - 説明表示の実装（最大3行、省略記号）
    - 達成期限表示の実装
    - 作成・更新日時表示の実装
    - _要件: 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8_
  - [x] 3.3 カードインタラクションの実装
    - クリックイベントハンドラーの実装
    - キーボードイベントハンドラーの実装（Enter/Space）
    - 期限切れ警告アイコンの実装
    - _要件: 2.11, 3.1, 3.2, 3.3, 3.4_

- [x] 3.4 MandalaCardのユニットテスト
  - カード表示のテスト
  - 進捗率の色分けテスト
  - 状態バッジの表示テスト
  - クリックイベントのテスト
  - キーボードイベントのテスト
  - _要件: 全要件_

- [x] 4. カスタムフックの実装
  - [x] 4.1 useMandalaListフックの基本実装
    - フック状態管理の実装
    - 検索キーワード管理の実装
    - フィルター条件管理の実装
    - ソート条件管理の実装
    - ページ番号管理の実装
    - _要件: 5.1, 5.2, 5.3, 6.1, 6.2, 6.3, 7.1, 7.2, 7.3, 8.1, 8.2, 8.3_
  - [x] 4.2 データ取得機能の実装
    - API呼び出し処理の実装
    - クエリパラメータの構築
    - ローディング状態管理
    - エラーハンドリング
    - _要件: 11.1, 11.2, 11.3, 11.4, 11.5, 11.6, 11.7_
  - [x] 4.3 検索・フィルター・ソート機能の実装
    - 検索実行処理の実装
    - フィルター実行処理の実装
    - ソート実行処理の実装
    - フィルタークリア処理の実装
    - _要件: 5.3, 5.4, 5.5, 5.6, 6.3, 6.4, 6.5, 6.6, 7.3, 7.4, 7.5, 7.6_
  - [x] 4.4 ページネーション機能の実装
    - ページ遷移処理の実装
    - 総ページ数計算の実装
    - ページ番号リセット処理の実装
    - _要件: 8.1, 8.2, 8.3, 8.4, 8.5, 8.6, 8.7, 8.8, 8.9_

- [x] 4.5 useMandalaListフックのユニットテスト
  - データ取得のテスト
  - 検索機能のテスト
  - フィルター機能のテスト
  - ソート機能のテスト
  - ページネーション機能のテスト
  - エラーハンドリングのテスト
  - _要件: 全要件_


- [x] 5. Paginationコンポーネントの実装
  - [x] 5.1 ページネーション基本構造の実装
    - ページ番号ボタンの実装
    - 前へ・次へボタンの実装
    - 現在ページのハイライト表示
    - _要件: 8.1, 8.2, 8.3, 8.4, 8.5_
  - [x] 5.2 ページネーション機能の実装
    - ページ遷移イベントハンドラーの実装
    - ボタンの有効/無効制御
    - ページ情報の表示（現在ページ/総ページ数）
    - _要件: 8.6, 8.7, 8.8, 8.9_

- [x] 5.3 Paginationのユニットテスト
  - ページ番号表示のテスト
  - ページ遷移のテスト
  - ボタン有効/無効のテスト
  - _要件: 全要件_

- [x] 6. EmptyStateコンポーネントの実装
  - [x] 6.1 空状態表示の実装
    - 空状態メッセージの表示
    - 説明テキストの表示
    - アイコンの表示
    - _要件: 9.1, 9.2, 9.3_
  - [x] 6.2 新規作成ボタンの実装
    - 新規作成ボタンの表示
    - クリックイベントハンドラーの実装
    - _要件: 9.4, 9.5_

- [x] 6.3 EmptyStateのユニットテスト
  - 空状態表示のテスト
  - 新規作成ボタンのテスト
  - _要件: 全要件_

- [x] 7. UserMenuコンポーネントの実装
  - [x] 7.1 ユーザーメニュー基本構造の実装
    - ユーザーメニューアイコンの実装
    - ドロップダウンメニューの実装
    - ユーザー名・メールアドレスの表示
    - _要件: 10.1, 10.2, 10.3_
  - [x] 7.2 ユーザーメニュー機能の実装
    - 設定メニュー項目の実装
    - ログアウトメニュー項目の実装
    - クリックイベントハンドラーの実装
    - _要件: 10.4, 10.5, 10.6, 10.7_

- [x] 7.3 UserMenuのユニットテスト
  - メニュー表示のテスト
  - 設定遷移のテスト
  - ログアウト処理のテスト
  - _要件: 全要件_

- [x] 8. MandalaListContainerコンポーネントの実装
  - [x] 8.1 コンテナ基本構造の実装
    - FilterBarの配置
    - MandalaGridの配置
    - Paginationの配置
    - _要件: 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8_
  - [x] 8.2 データ表示の実装
    - useMandalaListフックの統合
    - MandalaCardの配列表示
    - ローディング状態の表示
    - エラー状態の表示
    - 空状態の表示
    - _要件: 11.1, 11.2, 11.3, 11.4, 11.5, 11.6, 11.7_
  - [x] 8.3 検索・フィルター・ソート機能の統合
    - SearchBarの統合
    - StatusFilterの統合
    - SortDropdownの統合
    - イベントハンドラーの実装
    - _要件: 5.1, 5.2, 5.3, 6.1, 6.2, 6.3, 7.1, 7.2, 7.3_

- [x] 8.4 MandalaListContainerのユニットテスト
  - データ表示のテスト
  - 検索機能のテスト
  - フィルター機能のテスト
  - ソート機能のテスト
  - ページネーション機能のテスト
  - _要件: 全要件_


- [x] 9. MandalaListPageコンポーネントの実装
  - [x] 9.1 ページ基本構造の実装
    - AppLayoutの統合
    - ページ状態管理の実装
    - エラー表示コンポーネントの配置
    - ローディング表示の配置
    - _要件: 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8_
  - [x] 9.2 認証状態管理の実装
    - 認証状態チェックの実装
    - 未認証時のリダイレクト処理
    - プロフィール未設定時のリダイレクト処理
    - _要件: 12.1, 12.2, 12.3, 12.4_
  - [x] 9.3 ページ機能の統合
    - MandalaListContainerの統合
    - UserMenuの統合
    - 新規作成ボタンの配置
    - マンダラカードクリック時の遷移処理
    - _要件: 3.1, 3.2, 3.3, 3.4, 4.1, 4.2, 4.3, 4.4_

- [x] 9.4 MandalaListPageのユニットテスト
  - ページ表示のテスト
  - 認証状態チェックのテスト
  - リダイレクト処理のテスト
  - マンダラカードクリックのテスト
  - _要件: 全要件_

- [x] 10. レスポンシブデザインの実装
  - [x] 10.1 モバイルレイアウトの実装
    - 1カラムグリッドの実装
    - 検索・フィルター・ソートの縦配置
    - タッチ操作対応のボタンサイズ調整
    - _要件: 13.1, 13.4, 13.5_
  - [x] 10.2 タブレットレイアウトの実装
    - 2カラムグリッドの実装
    - 検索・フィルター・ソートの横配置
    - _要件: 13.2_
  - [x] 10.3 デスクトップレイアウトの実装
    - 3カラムグリッドの実装
    - 最大幅制限の実装
    - _要件: 13.3, 13.6_

- [x] 10.4 レスポンシブデザインのテスト
  - モバイル表示のテスト
  - タブレット表示のテスト
  - デスクトップ表示のテスト
  - _要件: 全要件_

- [x] 11. アクセシビリティ対応の実装
  - [x] 11.1 ARIA属性の実装
    - 検索バーのaria-label設定
    - フィルター・ソートのaria-label設定
    - マンダラカードのaria-label設定
    - ページネーションのaria-current設定
    - ローディング・エラーのaria-live設定
    - _要件: 14.1, 14.2, 14.6, 14.7_
  - [x] 11.2 キーボードナビゲーションの実装
    - Tabキーによるフォーカス移動
    - Enter/Spaceキーによるカード選択
    - フォーカスインジケーターの表示
    - _要件: 14.3, 14.4, 14.5_

- [x] 11.3 アクセシビリティのテスト
  - スクリーンリーダー対応のテスト
  - キーボードナビゲーションのテスト
  - ARIA属性のテスト
  - _要件: 全要件_


- [x] 12. パフォーマンス最適化の実装
  - [x] 12.1 コンポーネントのメモ化
    - MandalaCardのmemo化
    - ProgressCircleのmemo化
    - StatusBadgeのmemo化
    - コールバックのuseCallback化
    - 値のuseMemo化
    - _要件: 15.1, 15.2, 15.3, 15.4, 15.5_
  - [x] 12.2 検索のデバウンス実装
    - 検索入力のデバウンス処理
    - デバウンス時間の設定（300ms）
    - _要件: 15.2_
  - [x] 12.3 画像の遅延読み込み実装
    - loading="lazy"属性の設定
    - decoding="async"属性の設定
    - _要件: 15.5_
  - [x] 12.4 コード分割の実装
    - MandalaListPageの遅延読み込み
    - MandalaCardの遅延読み込み
    - _要件: 15.1_

- [x] 12.5 パフォーマンスのテスト
  - ページロード時間のテスト
  - 検索・フィルター・ソートのレスポンス時間テスト
  - ページネーションのレスポンス時間テスト
  - _要件: 全要件_

- [x] 13. エラーハンドリングの実装
  - [x] 13.1 エラー表示コンポーネントの実装
    - エラーメッセージの表示
    - 再試行ボタンの実装
    - エラーの自動非表示機能
    - _要件: 16.1, 16.2, 16.3, 16.4, 16.5, 16.6_
  - [x] 13.2 エラー処理の統合
    - APIエラーの処理
    - ネットワークエラーの処理
    - 認証エラーの処理
    - 予期しないエラーの処理
    - _要件: 16.1, 16.2, 16.3, 16.4_

- [x] 13.3 エラーハンドリングのテスト
  - APIエラー表示のテスト
  - ネットワークエラー表示のテスト
  - 再試行機能のテスト
  - _要件: 全要件_

- [x] 14. ルーティング設定の実装
  - [x] 14.1 ルート定義の追加
    - TOP画面（/）のルート追加
    - 認証ガードの設定
    - プロフィール設定チェックの追加
    - _要件: 12.1, 12.2, 12.3, 12.4_
  - [x] 14.2 ナビゲーション機能の実装
    - マンダラカードクリック時の遷移
    - 新規作成ボタンクリック時の遷移
    - 設定ボタンクリック時の遷移
    - ログアウト時の遷移
    - _要件: 3.1, 3.2, 3.3, 3.4, 4.1, 4.2, 4.3, 4.4, 10.6, 10.7_

- [x] 14.3 ルーティングのテスト
  - ルート遷移のテスト
  - 認証ガードのテスト
  - プロフィール設定チェックのテスト
  - _要件: 全要件_

- [x] 15. 統合テスト・E2Eテストの実装
  - [x] 15.1 統合テストの作成
    - データ取得フローのテスト
    - 検索フローのテスト
    - フィルターフローのテスト
    - ソートフローのテスト
    - ページネーションフローのテスト
    - _要件: 全要件_
  - [x] 15.2 E2Eテストの作成
    - ログイン→一覧表示→カード選択→詳細画面遷移のテスト
    - 検索→結果表示のテスト
    - フィルター→結果表示のテスト
    - ソート→並び替え表示のテスト
    - ページネーション→次ページ表示のテスト
    - エラー表示のテスト
    - 空状態表示のテスト
    - _要件: 全要件_

- [x] 16. ドキュメント作成
  - コンポーネントのStorybookストーリー作成
  - APIドキュメントの作成
  - 使用方法ドキュメントの作成
  - トラブルシューティングガイドの作成
  - _要件: 全要件_

- [x] 17. コード品質確認
  - ESLintエラー・警告の解消
  - Prettierによるフォーマット実行
  - TypeScript型エラーの解消
  - 未使用変数・インポートの削除
  - _要件: 全要件_

- [x] 18. 最終検証
  - 全要件の実装確認
  - タイムアウトを設定しつつ、段階的にテストして、無限ループに陥るテストを特定
  - 無限ループに陥るテストを修正
  - 全テストの実行と成功確認
  - パフォーマンス要件の確認
  - アクセシビリティ要件の確認
  - レスポンシブデザインの確認
  - _要件: 全要件_
