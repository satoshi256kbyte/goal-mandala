# Spec 4.5: テストカバレッジ改善

## 概要

現在のテストカバレッジ14.60%を80%以上に改善するための包括的なテスト追加プロジェクト。

## 目的

- テストカバレッジを14.60% → 80%以上に向上
- 品質保証の強化
- リグレッション防止
- コードの保守性向上

## 現状分析

### 全体カバレッジ（2025年12月13日時点）

- **Statements**: 14.60% (10,082 / 69,040)
- **Branches**: 63.72% (994 / 1,560)
- **Functions**: 37.52% (230 / 613)
- **Lines**: 14.60% (10,082 / 69,040)

### カテゴリ別カバレッジ

| カテゴリ | ファイル数 | Statements | Branches | Functions | Lines |
|---------|-----------|------------|----------|-----------|-------|
| components | 109 | 15.32% | 12.87% | 12.72% | 15.32% |
| hooks | 43 | 2.42% | 4.52% | 1.55% | 2.42% |
| services | 28 | 11.12% | 15.41% | 9.05% | 11.12% |
| utils | 32 | 18.60% | 24.47% | 12.71% | 18.60% |
| contexts | 4 | 59.07% | 48.51% | 43.33% | 59.07% |
| pages | 13 | 6.57% | 6.17% | 5.59% | 6.57% |
| schemas | 3 | 30.89% | 26.42% | 33.33% | 30.89% |
| other | 48 | 10.11% | 10.42% | 8.85% | 10.11% |

### 優先度の高いカテゴリ

1. **hooks** (2.42%): 最も低いカバレッジ、43ファイル
2. **pages** (6.57%): ユーザー体験に直結、13ファイル
3. **services** (11.12%): ビジネスロジック、28ファイル
4. **components** (15.32%): UI要素、109ファイル

## 目標

### Phase 1目標（短期）

- 全体カバレッジ: 50%以上
- hooks: 40%以上
- pages: 40%以上
- services: 50%以上

### Phase 2目標（中期）

- 全体カバレッジ: 65%以上
- hooks: 60%以上
- pages: 60%以上
- services: 70%以上
- components: 50%以上

### Phase 3目標（長期）

- 全体カバレッジ: 80%以上
- hooks: 80%以上
- pages: 80%以上
- services: 85%以上
- components: 75%以上

## 成果物

- 追加テストファイル（推定200-300ファイル）
- カバレッジレポート（HTML形式）
- テスト実装ガイドライン
- ステアリングファイル更新

## 関連ドキュメント

- [requirements.md](./requirements.md): 要件定義
- [design.md](./design.md): 設計ドキュメント
- [tasks.md](./tasks.md): タスクリスト
- [9-test-guide.md](../../steering/9-test-guide.md): テストガイド

## 実装期間

- Phase 1: 2週間（推定）
- Phase 2: 2週間（推定）
- Phase 3: 2週間（推定）
- 合計: 6週間（推定）

## 注意事項

- 既存のテストは維持する
- テストの品質を優先する（カバレッジ数値だけを追わない）
- 段階的に実装する（一度に全てを実装しない）
- 各Phaseの完了後にレビューを実施する
