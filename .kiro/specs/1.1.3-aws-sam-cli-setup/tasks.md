# 実装計画

- [x] 1. SAMテンプレートファイル作成
  - template.yamlファイルを作成し、Lambda関数とAPI Gatewayの基本設定を定義する
  - TypeScriptビルド設定（esbuild）を含める
  - CORS設定とパラメータ設定を含める
  - _要件: 1.1, 2.1, 2.3, 3.1, 3.2, 3.3, 3.4_

- [x] 2. SAM設定ファイル作成
  - samconfig.tomlファイルを作成し、ローカル開発とデプロイの設定を定義する
  - ローカルAPI起動時のポート設定とパラメータオーバーライドを含める
  - デプロイ時のS3バケット設定と環境別設定を含める
  - _要件: 4.1, 4.2, 4.3_

- [x] 3. Lambda関数テンプレート実装
  - src/index.tsにHonoベースのメインハンドラーを実装する
  - CORS設定、ログ設定、エラーハンドリングを含める
  - ヘルスチェックエンドポイントを実装する
  - 環境変数読み込み処理を実装する
  - _要件: 5.1, 5.2, 5.3, 5.4_

- [x] 4. 環境設定とユーティリティ実装
  - src/config/environment.tsで環境変数管理を実装する
  - src/utils/logger.tsでログ出力ユーティリティを実装する
  - src/middleware/auth.tsで認証ミドルウェアのテンプレートを実装する
  - _要件: 5.4, 1.2_

- [x] 5. ローカルAPI起動スクリプト作成
  - tools/scripts/sam-local-start.shスクリプトを作成する
  - 依存関係のビルド処理を含める
  - SAM local start-apiコマンドの実行を含める
  - ホットリロード機能の設定を含める
  - _要件: 6.1, 6.2, 6.3, 6.4_

- [x] 6. SAMビルドスクリプト作成
  - tools/scripts/sam-build.shスクリプトを作成する
  - TypeScriptのビルド処理を含める
  - SAM buildコマンドの実行を含める
  - ビルド成果物の検証を含める
  - _要件: 6.1_

- [x] 7. package.json設定更新
  - backendパッケージのpackage.jsonにSAM関連のスクリプトを追加する
  - 必要な依存関係（Hono、AWS Lambda types等）を追加する
  - ビルド設定とテスト設定を更新する
  - _要件: 1.1, 5.1_

- [x] 8. 環境変数設定ファイル更新
  - .env.exampleファイルにSAM関連の環境変数を追加する
  - DATABASE_URL、JWT_SECRET、FRONTEND_URL等の設定を含める
  - 開発環境用のデフォルト値を設定する
  - _要件: 1.2, 5.4_

- [x] 9. 統合テスト実装
  - SAM local start-apiコマンドでローカルAPIが起動することを確認する
  - ヘルスチェックエンドポイントにアクセスして正常なレスポンスを確認する
  - CORS設定が正しく動作することを確認する
  - Docker Compose環境との連携を確認する
  - _要件: 1.1, 1.3, 2.1, 2.2, 2.3_

- [x] 10. ドキュメント更新
  - CONTRIBUTING.mdにSAM CLI環境の使用方法を追加する
  - ローカル開発環境の起動手順を更新する
  - トラブルシューティング情報を追加する
  - _要件: 全般_
