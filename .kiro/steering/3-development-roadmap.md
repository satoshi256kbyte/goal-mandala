# 開発ロードマップ

## 開発フェーズ概要

曼荼羅目標管理システムの開発を以下の4つのフェーズに分けて実施します。

### フェーズ1: 基盤構築

- 開発環境セットアップ
- インフラ基盤構築（CDK）
- 認証システム構築
- データベース設計・構築

### フェーズ2: コア機能開発

- マンダラチャート生成機能
- AI統合（Amazon Bedrock + Nova Micro）
- 基本的なCRUD操作
- ユーザー管理機能

### フェーズ3: 活動機能開発

- タスク管理機能
- リマインド機能（メール配信）
- 進捗管理・表示機能
- Step Functions統合

### フェーズ4: 完成・テスト

- 振り返り機能
- E2Eテスト実装
- パフォーマンス最適化
- 本番環境デプロイ

## 詳細スケジュール

### フェーズ1: 基盤構築（25人日）

#### 開発環境セットアップ（6人日）

**目標**: ローカル開発環境の完全構築

#### 主要タスク

- .tool-versions設定確認・asdf環境構築（Node.js 23.10.0, Python 3.13.3）
- モノレポ構成設定（pnpm workspace + turbo）
- Docker Compose環境構築（PostgreSQL + cognito-local）
- AWS SAM CLI環境構築
- 開発ツール設定（ESLint, Prettier, TypeScript）
- GitHub Actions基本設定 + act設定

#### 成果物

- 完全に動作するローカル開発環境
- CI/CDパイプライン基盤
- 開発者オンボーディングドキュメント

#### インフラ基盤構築（8人日）

**目標**: AWS基盤リソースの構築

#### 主要タスク

- CDKプロジェクト初期化・スタック設計
- VPC・ネットワーク構成（サブネット、ゲートウェイ、セキュリティグループ）
- Aurora Serverless V2構築（クラスター、パラメータ、監視）
- Secrets Manager設定（DB認証情報、JWT秘密鍵）
- CloudFront + S3構成（SSL証明書、キャッシュ設定）

#### 成果物

- 本番相当のAWSインフラ
- インフラ監視・アラート設定
- デプロイ自動化スクリプト

#### 認証システム構築（6人日）

**目標**: ユーザー認証機能の実装

#### 主要タスク

- Amazon Cognito設定（User Pool、パスワードポリシー）
- JWT認証ミドルウェア実装（検証、エラーハンドリング）
- 認証画面実装（ログイン、サインアップ、パスワードリセット）
- 認証状態管理実装（React Context、永続化、自動ログアウト）

#### 成果物

- 完全な認証システム
- 保護されたルート機能
- 認証関連ユニットテスト

#### データベース設計・構築（5人日）

**目標**: データベーススキーマの確定と実装

#### 主要タスク

- ER図設計・ドキュメント化
- Prismaスキーマ定義（モデル、リレーション、制約）
- マイグレーション実装・CI/CD統合
- シードデータ作成・管理スクリプト

#### 成果物

- 完全なデータベーススキーマ
- マイグレーション管理システム
- 開発・テスト用データセット

### フェーズ2: コア機能開発（35人日）

#### マンダラチャート基本機能（12人日）

**目標**: マンダラチャートの表示・編集機能

#### 主要タスク

- 9×9グリッドレイアウト実装（レスポンシブ、アクセシビリティ対応）
- 目標入力フォーム（バリデーション、日付ピッカー、下書き保存）
- サブ目標・アクション入力フォーム（動的フォーム、並び替え、一括編集）
- 進捗表示機能（計算ロジック、プログレスバー、アニメーション）
- 編集機能（インライン編集、モーダル編集、変更履歴、競合回避）

#### 成果物

- 完全なマンダラチャート表示・編集システム
- 進捗管理機能
- ユーザビリティテスト結果

#### AI統合機能（15人日）

**目標**: Amazon Bedrock統合とAI生成機能

#### 主要タスク

- Bedrock Lambda関数実装（SDK統合、Nova Micro設定、エラーハンドリング）
- サブ目標生成API（プロンプト最適化、品質評価）
- アクション生成API（コンテキスト活用、種別判定、重複排除）
- タスク生成API（粒度調整、推定時間算出、優先度設定）
- 非同期処理状態管理（状態管理、進捗通知、タイムアウト、リトライ）

#### 成果物

- 高品質なAI生成機能
- 非同期処理管理システム
- AI生成品質評価レポート

#### ユーザー管理・プロフィール（8人日）

**目標**: ユーザー情報管理機能

#### 主要タスク

- プロフィール管理API（CRUD、検証、履歴管理）
- プロフィール入力画面（業種・組織規模選択、画像アップロード）
- マンダラチャート一覧画面（検索・フィルター、ソート、ページネーション）
- ダッシュボード画面（進捗サマリー、統計情報、クイックアクション）

#### 成果物

- 完全なユーザー管理システム
- 直感的なダッシュボード
- ユーザーエクスペリエンス最適化

### フェーズ3: 活動機能開発（30人日）

#### タスク管理機能（12人日）

**目標**: 日々のタスク管理機能

#### 主要タスク

- タスク一覧画面（カード表示、状態別表示、期限警告、バルク操作）
- タスク詳細・更新機能（状態更新、完了時間記録、メモ・コメント、履歴表示）
- フィルター・検索機能（多条件検索、保存済み検索）
- 進捗計算ロジック（タスク→アクション→サブ目標→目標の階層計算）

#### 成果物

- 効率的なタスク管理システム
- 直感的な進捗可視化
- タスク管理ベストプラクティス

#### リマインド機能（10人日）

**目標**: メール配信システム

#### 主要タスク

- SES統合（設定・認証、送信制限、バウンス処理、統計）
- メール生成機能（パーソナライズ、HTMLメール、配信停止）
- 配信スケジュール管理（スケジューラー、タイムゾーン対応、頻度制御）
- メール内リンク機能（認証付きリンク、ワンクリックアクション、追跡）

#### 成果物

- 高度なメール配信システム
- パーソナライズされたリマインド機能
- 配信効果測定機能

#### Step Functions統合（8人日）

**目標**: 長時間処理の非同期化

#### 主要タスク

- ワークフロー定義（状態遷移、エラーハンドリング、並列処理）
- タスク生成処理（バッチ処理、処理分散、結果集約）
- 状態監視機能（実行状態監視、進捗表示、実行履歴）
- エラーハンドリング（エラー分類、自動復旧、手動介入、アラート）

#### 成果物

- 堅牢な非同期処理システム
- 包括的な監視・アラート機能
- 運用効率化ツール

### フェーズ4: 完成・テスト（20人日）

#### 振り返り機能（6人日）

**目標**: 振り返り機能の実装

#### 主要タスク

- 振り返り入力画面（項目別入力、自動保存、テンプレート）
- 振り返りAPI（CRUD、検索）
- 履歴表示機能（時系列表示、比較、エクスポート、統計・分析）

#### 成果物

- 包括的な振り返り機能
- データ分析・エクスポート機能
- 継続的改善支援ツール

#### テスト・品質向上（10人日）

**目標**: 包括的なテスト実装

#### 主要タスク

- ユニットテスト実装（80%カバレッジ達成、モック・スタブ）
- E2Eテスト実装（主要フロー、クロスブラウザ、テストデータ管理）
- パフォーマンステスト（負荷テスト、ボトルネック特定、スケーラビリティ）
- セキュリティテスト（脆弱性スキャン、認証・認可、入力検証）

#### 成果物

- 包括的なテストスイート
- パフォーマンス最適化レポート
- セキュリティ監査レポート

#### 本番デプロイ・最終調整（4人日）

**目標**: 本番環境での安定稼働

#### 主要タスク

- 本番環境構築（セキュリティ強化、SSL証明書、ドメイン設定）
- 監視・ログ設定（CloudWatch、アラート、ダッシュボード）
- ドキュメント整備（API仕様書、運用手順書、ユーザーマニュアル）

#### 成果物

- 本番稼働システム
- 運用監視体制
- 完全なドキュメントセット

## マイルストーン

### M1: 基盤完成

- ローカル開発環境での基本的なCRUD操作が可能
- 認証機能が動作
- CI/CDパイプラインが稼働

### M2: MVP完成

- マンダラチャート生成・表示が可能
- AI機能が基本動作
- ユーザー登録からマンダラ作成まで一通り動作

### M3: 活動機能完成

- タスク管理・リマインド機能が動作
- 日々の活動サイクルが完全動作
- 進捗管理が正常に機能

### M4: 本番リリース

- 全機能が本番環境で安定稼働
- テストカバレッジ80%達成
- 運用体制確立

## リスク管理

### 高リスク項目

1. **AI生成品質**: Nova Microの生成品質が期待値を下回る可能性
   - **対策**: 早期プロトタイプでの品質検証、プロンプト最適化

2. **パフォーマンス**: Aurora Serverless V2のコールドスタート問題
   - **対策**: 接続プール最適化、必要に応じてRDS Proxy導入検討

3. **複雑性**: Step Functionsの実装複雑性
   - **対策**: シンプルなワークフローから開始、段階的に複雑化

### 中リスク項目

1. **UI/UX**: マンダラチャート表示の複雑性
   - **対策**: 早期ユーザビリティテスト、段階的改善

2. **メール配信**: SES制限・到達率問題
   - **対策**: 段階的な送信量増加申請、代替配信手段検討

## 成功指標

### 技術指標

- ユニットテストカバレッジ: 80%以上
- E2Eテスト成功率: 95%以上
- API応答時間: 95%ile < 2秒
- システム稼働率: 99.5%以上

## 次フェーズ計画

### 将来機能（Phase 2）

- RDS Proxy導入によるパフォーマンス改善
- 詳細な進捗分析・レポート機能
- チーム機能・共有機能
- モバイルアプリ対応
- 多言語対応
