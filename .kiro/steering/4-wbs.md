# WBS（Work Breakdown Structure）

## 進捗管理ルール

- ワークパッケージごとにSpec作成
- Specフォルダ名: `WBS番号-ワークパッケージ名の英語名のハイフン区切り`
- 複数Specの場合: `WBS番号-`に連番付与
- Spec更新時、このファイルに進捗反映

## 進捗状況サマリー（2025年12月6日時点）

### フェーズ1: 基盤構築 ✅ 完了

開発環境セットアップ、インフラ基盤構築、認証システム構築、データベース設計・構築

### フェーズ2: コア機能開発 ✅ 完了

- マンダラチャート基本機能: ✅ 完了（5/5）
- AI統合機能: ✅ 完了（5/5 = 100%）
- ユーザー管理機能: 🚧 進行中（45/62 = 72.6%）
  - プロフィール管理API: ✅ 完了
  - プロフィール入力画面: ✅ 完了
  - マンダラチャート一覧画面: ✅ 完了
  - ダッシュボード画面: 未着手（0/17タスク）
- テスト修正・品質向上: ✅ 完了（100%）
  - テストパフォーマンス改善: ✅ 完了
  - テストアーキテクチャ刷新: ✅ 完了
    - テストファイル数: 205+ → 36（82%削減）
    - 実行時間: 約18分 → 約12秒（-99.3%）
    - 成功率: 43.4% → 100%（+56.6%）
  - 段階的テスト追加: ✅ 完了（2025年12月5日）
    - テスト成功率: 96.1% → 100%（+3.9%）
    - 実行テスト数: 2401/2424（23テストスキップ）
    - ファイル成功率: 98.6%（142/144ファイル）
    - 実行時間: 114.76秒
    - テスト安定性: 3回連続100%成功

### フェーズ3: 活動機能開発 🚧 進行中（約30%完了）

- タスク管理機能: 🚧 進行中
  - データベーススキーマ: ✅ 完了
  - バックエンドサービス: ✅ 完了
  - Lambda Handler: 🚧 未完了
  - フロントエンド: 🚧 部分完了
  - API統合: 🚧 未完了

### フェーズ4: 完成・テスト 未着手

## 実装タスクリスト作成ルール

- テストファースト構成（テストコード実装 > 実装 > テスト）
- 各実装タスクで`npm run format`実行後、`npm run lint`でエラー・警告ゼロ件確認

## プロジェクト構造

### 1. 基盤構築

#### 1.1 開発環境セットアップ ✅

- [x] 1.1.1 モノレポ構成設定
- [x] 1.1.2 Docker Compose環境構築
- [x] 1.1.3 AWS SAM CLI環境構築
- [x] 1.1.4 開発ツール設定
- [x] 1.1.5 GitHub Actions基本設定

#### 1.2 インフラ基盤構築 ✅

- [x] 1.2.1 CDKプロジェクト初期化
- [x] 1.2.2 VPC・ネットワーク構成
- [x] 1.2.3 Aurora Serverless V2構築
- [x] 1.2.4 Secrets Manager設定
- [x] 1.2.5 CloudFront + S3構成

#### 1.3 認証システム構築 ✅

- [x] 1.3.1 Amazon Cognito設定
- [x] 1.3.2 JWT認証ミドルウェア実装
- [x] 1.3.3 認証画面実装
- [x] 1.3.4 認証状態管理実装

#### 1.4 データベース設計・構築 ✅

- [x] 1.4.1 ER図設計（→ [6-database-design.md](./6-database-design.md)）
- [x] 1.4.2 Prismaスキーマ定義
- [x] 1.4.3 マイグレーション実装
- [x] 1.4.4 シードデータ作成

### 2. コア機能開発

#### 2.1 マンダラチャート基本機能 ✅

- [x] 2.1.1 マンダラチャート表示コンポーネント（全15タスク完了）
- [x] 2.1.2 目標入力フォーム（全18タスク完了）
- [x] 2.1.3 サブ目標・アクション入力フォーム（全12タスク完了）
- [x] 2.1.4 進捗表示機能（全8タスク完了）
- [x] 2.1.5 編集機能（全17タスク完了）

#### 2.2 AI統合機能 ✅

- [x] 2.2.1 Bedrock Lambda関数実装（全14タスク完了、100%）
- [x] 2.2.2 サブ目標生成API（全13タスク完了、100%）
- [x] 2.2.3 アクション生成API（全14タスク完了、100%）
- [x] 2.2.4 タスク生成API（全14タスク完了、100%）
- [x] 2.2.5 非同期処理状態管理（全13タスク完了、100%）

#### 2.3 ユーザー管理機能 🚧

- [x] 2.3.1 プロフィール管理API（全10タスク完了、100%）
- [x] 2.3.2 プロフィール入力画面（全16タスク完了、100%）
- [x] 2.3.3 マンダラチャート一覧画面（全19タスク完了、100%）
- [ ] 2.3.4 ダッシュボード画面（0/17タスク、未着手）

#### 2.4 テスト修正・品質向上 ✅

- [x] 2.4.6 テストパフォーマンス改善（100%完了）
- [x] 2.4.9 テストアーキテクチャ刷新（100%完了）
  - 全13タスク完了（2025年11月23日）
  - 成果: テストファイル数87%削減、実行時間大幅短縮、成功率100%達成
- [x] 2.4.11 テスト環境メモリリーク修正（100%完了）
- [x] 2.4.12 段階的テスト追加（100%完了）
  - 全15タスク完了（2025年12月5日）
  - 成果:
    - テスト成功率: 96.1% → 100%（+3.9%）
    - 実行テスト数: 2401/2424（23テストスキップ）
    - ファイル成功率: 98.6%（142/144ファイル）
    - 実行時間: 114.76秒
    - テスト安定性: 3回連続100%成功
    - カバレッジ測定: 14.60%（目標80%未達成、改善計画策定済み）
- [x] 2.4.12 段階的テスト追加（100%完了、2025年12月5日）
  - 全15タスク完了
  - 成果:
    - テスト成功率: 96.1% → 100%（+3.9%）
    - 実行テスト数: 2401/2424（23テストスキップ）
    - ファイル成功率: 98.6%（142/144ファイル）
    - 実行時間: 114.76秒
    - テスト安定性: 3回連続100%成功
  - 主な修正内容:
    - 認証関連ページのモック設定修正（11テスト）
    - 下書き保存機能のテスト修正（6テスト）
    - DOMクエリエラー修正（122テスト）
    - 非同期処理の適切な待機実装（多数）
    - メモリ最適化設定（singleFork: false）

### 3. 活動機能開発 🚧 進行中

#### 3.1 タスク管理機能 🚧 進行中

- [ ] 3.1.1 タスク管理機能実装（.kiro/specs/3.1.1-task-management）
  - データベーススキーマ: ✅ 完了
  - バックエンドサービス: ✅ 完了（TaskService, FilterService, ProgressService, NotificationService）
  - Lambda Handler: 🚧 未完了（スタブのみ）
  - フロントエンドコンポーネント: ✅ 完了（TaskCard, ProgressBar, TaskFilter, TaskSearch）
  - フロントエンドページ: ✅ 完了（TaskListPage, TaskDetailPage）
  - API統合: 🚧 未完了
  - プロパティベーステスト: 🚧 未完了（0/20プロパティ）

#### 3.2 リマインド機能

- [ ] 3.2.1 SES統合
- [ ] 3.2.2 メール生成機能
- [ ] 3.2.3 配信スケジュール管理
- [ ] 3.2.4 メール内リンク機能

#### 3.3 Step Functions統合

- [ ] 3.3.1 ワークフロー定義
- [ ] 3.3.2 タスク生成処理
- [ ] 3.3.3 状態監視機能
- [ ] 3.3.4 エラーハンドリング

### 4. 完成・テスト 未着手

#### 4.1 振り返り機能

- [ ] 4.1.1 振り返り入力画面
- [ ] 4.1.2 振り返りAPI
- [ ] 4.1.3 履歴表示機能

#### 4.2 テスト実装

- [ ] 4.2.1 ユニットテスト実装
- [ ] 4.2.2 E2Eテスト実装
- [ ] 4.2.3 パフォーマンステスト
- [ ] 4.2.4 セキュリティテスト

#### 4.3 本番デプロイ

- [ ] 4.3.1 本番環境構築
- [ ] 4.3.2 監視・ログ設定
- [ ] 4.3.3 ドキュメント整備

## 関連ドキュメント

- [6-database-design.md](./6-database-design.md) - ER図とテーブル定義
- [5-screen-specifications.md](./5-screen-specifications.md) - 画面一覧と画面遷移図

## 将来の拡張・改善タスク

MVP完成後に実装する拡張機能や改善タスク。

### 5. 将来の拡張機能

#### 5.1 AI機能の拡張

- [ ] 5.1.1 カスタムメトリクス実装（2.2.1から移動）
- [ ] 5.1.2 コスト監視実装（2.2.1から移動）
- [ ] 5.1.3 プロンプト最適化（2.2.1から移動）
- [ ] 5.1.4 複数モデル対応
- [ ] 5.1.5 ストリーミングレスポンス対応
- [ ] 5.1.6 多言語対応

#### 5.2 パフォーマンス改善

- [ ] 5.2.1 RDS Proxy導入
- [ ] 5.2.2 レスポンスキャッシュ実装
- [ ] 5.2.3 Lambda Provisioned Concurrency

#### 5.3 運用改善

- [ ] 5.3.1 自動デプロイパイプライン
- [ ] 5.3.2 詳細な監視ダッシュボード
- [ ] 5.3.3 生成品質評価機能

## 注記

タスク2.2.1の一部（カスタムメトリクス、コスト監視、プロンプト最適化）は、MVP完成後の拡張機能として5.1に移動。基本的なAI生成機能の動作には必須ではないため優先度を下げた。構造化ログとCloudWatchアラームは実装済みで、基本的な監視体制は整っている。
