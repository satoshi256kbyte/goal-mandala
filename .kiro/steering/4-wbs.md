# WBS（Work Breakdown Structure）

## 進捗管理ルール

- ワークパッケージごとにSpecを作成してください。
- Specのフォルダ名は、`WBS番号-ワークパッケージ名の英語名のハイフン区切り`としてください。
- 1つのワークパッケージに対して複数のSpecがある場合は、`WBS番号-`に連番を付与してください。
- Specの各ファイルを更新した場合、このファイルに進捗状況を反映してください。

## 進捗状況サマリー（2025年10月8日時点）

### フェーズ1: 基盤構築 ✅ 完了

- 開発環境セットアップ: 完了
- インフラ基盤構築: 完了
- 認証システム構築: 完了
- データベース設計・構築: 完了

### フェーズ2: コア機能開発 🚧 進行中（約80%完了）

- マンダラチャート基本機能: ✅ 完了（5/5）
  - 2.1.1 マンダラチャート表示: ✅
  - 2.1.2 目標入力フォーム: ✅
  - 2.1.3 サブ目標・アクション入力: ✅
  - 2.1.4 進捗表示: ✅
  - 2.1.5 編集機能: ✅
- AI統合機能: 🚧 進行中（1/5）
  - 2.2.1 Bedrock Lambda関数: ✅ 100%完了
  - 2.2.2 サブ目標生成API: 🚧 実装中（タスク12進行中、約62%）
  - 2.2.3 アクション生成API: 未着手
  - 2.2.4 タスク生成API: 未着手
  - 2.2.5 非同期処理状態管理: 未着手
- ユーザー管理機能: 未着手（0/4）

### フェーズ3: 活動機能開発 未着手

### フェーズ4: 完成・テスト 未着手

## 実装タスクリスト(tasks.md)の作り方

- テストファーストの構成にしてください。テストコードの実装＞実装＞テストの順にしてください。
- 各実装タスクは、必ず`npm run format`を実行した上で、`npm run lint`を通してエラーと警告がゼロ件にする作業を入れてください。

## プロジェクト構造

### 1. 基盤構築

#### 1.1 開発環境セットアップ

- [x] 1.1.1 モノレポ構成設定 (Spec: 1.1.1-monorepo-setup)
  - [x] 1.1.1.1 .tool-versions設定確認（Node.js 23.10.0, Python 3.13.3）
  - [x] 1.1.1.2 pnpm workspace設定ファイル作成
  - [x] 1.1.1.3 turbo.json設定
  - [x] 1.1.1.4 ルートpackage.json設定
  - [x] 1.1.1.5 各パッケージのpackage.json設定
  - [x] 1.1.1.6 共通依存関係の整理

- [x] 1.1.2 Docker Compose環境構築 (Spec: 1.1.2-docker-compose-setup)
  - [x] 1.1.2.1 docker-compose.yml作成
  - [x] 1.1.2.2 PostgreSQL設定
  - [x] 1.1.2.3 cognito-local設定
  - [x] 1.1.2.4 環境変数設定（.env.example）
  - [x] 1.1.2.5 初期化スクリプト作成

- [x] 1.1.3 AWS SAM CLI環境構築 (Spec: 1.1.3-aws-sam-cli-setup)
  - [x] 1.1.3.1 template.yaml作成
  - [x] 1.1.3.2 samconfig.toml設定
  - [x] 1.1.3.3 ローカルAPI起動スクリプト
  - [x] 1.1.3.4 Lambda関数テンプレート作成
  - [x] 1.1.3.5 API Gateway設定

- [x] 1.1.4 開発ツール設定 (Spec: 1.1.1-monorepo-setup)
  - [x] 1.1.4.1 ESLint設定ファイル作成
  - [x] 1.1.4.2 Prettier設定ファイル作成
  - [x] 1.1.4.3 TypeScript設定ファイル作成
  - [x] 1.1.4.4 VS Code設定ファイル作成
  - [x] 1.1.4.5 Git hooks設定（husky + lint-staged）

- [x] 1.1.5 GitHub Actions基本設定 (Spec: 1.1.5-github-actions-setup)
  - [x] 1.1.5.1 CI/CDワークフロー作成
  - [x] 1.1.5.2 act設定ファイル作成
  - [x] 1.1.5.3 シークレット設定ドキュメント作成
  - [x] 1.1.5.4 ブランチ保護ルール設定
  - [x] 1.1.5.5 プルリクエストテンプレート作成

#### 1.2 インフラ基盤構築

- [x] 1.2.1 CDKプロジェクト初期化 (Spec: 1.2.1-cdk-project-init)
  - [x] 1.2.1.1 CDKアプリケーション初期化
  - [x] 1.2.1.2 cdk.json設定
  - [x] 1.2.1.3 CDK依存関係インストール
  - [x] 1.2.1.4 スタック構成設計
  - [x] 1.2.1.5 環境別設定ファイル作成

- [x] 1.2.2 VPC・ネットワーク構成 (Spec: 1.2.2-vpc-network-setup)
  - [x] 1.2.2.1 VPCスタック作成
  - [x] 1.2.2.2 サブネット設定（パブリック・プライベート）
  - [x] 1.2.2.3 インターネットゲートウェイ設定
  - [x] 1.2.2.4 NATゲートウェイ設定
  - [x] 1.2.2.5 ルートテーブル設定
  - [x] 1.2.2.6 セキュリティグループ設定

- [x] 1.2.3 Aurora Serverless V2構築 (Spec: 1.2.3-aurora-serverless-setup)
  - [x] 1.2.3.1 DBクラスター作成
  - [x] 1.2.3.2 DBサブネットグループ作成
  - [x] 1.2.3.3 パラメータグループ設定
  - [x] 1.2.3.4 セキュリティグループ設定
  - [x] 1.2.3.5 バックアップ設定
  - [x] 1.2.3.6 監視設定

- [x] 1.2.4 Secrets Manager設定 (Spec: 1.2.4-secrets-manager-setup)
  - [x] 1.2.4.1 データベース認証情報シークレット作成
  - [x] 1.2.4.2 JWT秘密鍵シークレット作成
  - [x] 1.2.4.3 外部API認証情報シークレット作成
  - [x] 1.2.4.4 シークレットローテーション設定
  - [x] 1.2.4.5 IAMロール・ポリシー設定

- [x] 1.2.5 CloudFront + S3構成 (Spec: 1.2.5-cloudfront-s3-setup)
  - [x] 1.2.5.1 S3バケット作成（フロントエンド用）
  - [x] 1.2.5.2 S3バケットポリシー設定
  - [x] 1.2.5.3 CloudFrontディストリビューション作成
  - [x] 1.2.5.4 オリジンアクセスコントロール設定
  - [x] 1.2.5.5 キャッシュ動作設定
  - [x] 1.2.5.6 SSL証明書設定

#### 1.3 認証システム構築

- [x] 1.3.1 Amazon Cognito設定 (Spec: 1.3.1-cognito-setup)
  - [x] 1.3.1.1 User Pool作成
  - [x] 1.3.1.2 User Pool Client設定
  - [x] 1.3.1.3 パスワードポリシー設定
  - [x] 1.3.1.4 属性設定（email, name等）
  - [x] 1.3.1.5 Lambda Trigger設定（必要に応じて）

- [x] 1.3.2 JWT認証ミドルウェア実装 (Spec: 1.3.2-jwt-auth-middleware)
  - [x] 1.3.2.1 JWT検証ライブラリ選定・導入
  - [x] 1.3.2.2 認証ミドルウェア実装
  - [x] 1.3.2.3 トークン検証ロジック実装
  - [x] 1.3.2.4 エラーハンドリング実装
  - [x] 1.3.2.5 ユニットテスト作成

- [x] 1.3.3 認証画面実装 (Spec: 1.3.3-auth-screens)
  - [x] 1.3.3.1 ログイン画面コンポーネント作成
  - [x] 1.3.3.2 サインアップ画面コンポーネント作成
  - [x] 1.3.3.3 パスワードリセット画面作成
  - [x] 1.3.3.4 フォームバリデーション実装
  - [x] 1.3.3.5 エラー表示機能実装

- [x] 1.3.4 認証状態管理実装 (Spec: 1.3.4-auth-state-management)
  - [x] 1.3.4.1 React Context作成
  - [x] 1.3.4.2 認証状態管理フック作成
  - [x] 1.3.4.3 ProtectedRoute コンポーネント作成
  - [x] 1.3.4.4 トークン永続化実装
  - [x] 1.3.4.5 自動ログアウト機能実装

#### 1.4 データベース設計・構築

- [x] 1.4.1 ER図設計（→ [6-database-design.md](./6-database-design.md)）
  - [x] 1.4.1.1 エンティティ定義
  - [x] 1.4.1.2 リレーションシップ設計
  - [x] 1.4.1.3 制約条件定義
  - [x] 1.4.1.4 インデックス設計
  - [x] 1.4.1.5 ER図ドキュメント作成

- [x] 1.4.2 Prismaスキーマ定義（→ [6-database-design.md](./6-database-design.md)）
  - [x] 1.4.2.1 schema.prisma作成
  - [x] 1.4.2.2 モデル定義
  - [x] 1.4.2.3 リレーション定義
  - [x] 1.4.2.4 列挙型定義
  - [x] 1.4.2.5 インデックス・制約定義

- [x] 1.4.3 マイグレーション実装
  - [x] 1.4.3.1 初期マイグレーション作成
  - [x] 1.4.3.2 マイグレーション実行スクリプト作成
  - [x] 1.4.3.3 ロールバック手順作成
  - [x] 1.4.3.4 CI/CD統合
  - [x] 1.4.3.5 本番環境マイグレーション手順作成

- [x] 1.4.4 シードデータ作成
  - [x] 1.4.4.1 開発用シードデータ作成
  - [x] 1.4.4.2 テスト用シードデータ作成
  - [x] 1.4.4.3 シードデータ投入スクリプト作成
  - [x] 1.4.4.4 データクリーンアップスクリプト作成
  - [x] 1.4.4.5 シードデータ管理ドキュメント作成

### 2. コア機能開発

#### 2.1 マンダラチャート基本機能

- [x] 2.1.1 マンダラチャート表示コンポーネント (Spec: 2.1.1-mandala-chart-display) ✅
  - [x] 2.1.1.1 9×9グリッドレイアウト実装
  - [x] 2.1.1.2 セル表示コンポーネント作成
  - [x] 2.1.1.3 進捗表示機能実装
  - [x] 2.1.1.4 レスポンシブ対応実装
  - [x] 2.1.1.5 アクセシビリティ対応
  - _完了: 全15タスク完了_

- [x] 2.1.2 目標入力フォーム (Spec: 2.1.2-goal-input-form) ✅
  - [x] 2.1.2.1 プロジェクト基盤とセットアップ完了
  - [x] 2.1.2.2 目標入力フォームコンポーネント作成
  - [x] 2.1.2.3 バリデーション機能実装
  - [x] 2.1.2.4 日付ピッカー実装
  - [x] 2.1.2.5 文字数カウント機能実装
  - [x] 2.1.2.6 下書き保存機能実装
  - [x] 2.1.2.7 レスポンシブデザイン実装
  - [x] 2.1.2.8 エラーハンドリング実装
  - [x] 2.1.2.9 統合テスト・E2Eテスト実装
  - [x] 2.1.2.10 ドキュメント・Storybook作成
  - [x] 2.1.2.11 セキュリティ対策実装
  - [x] 2.1.2.12 アクセシビリティ対応実装
  - [x] 2.1.2.13 パフォーマンス最適化実装（一部残タスクあり）
  - [x] 2.1.2.14 最終検証・コード品質確認
  - _完了: 全18タスク完了（タスク12.1-12.5は一部未完了だが機能は完成）_

- [x] 2.1.3 サブ目標・アクション入力フォーム (Spec: 2.1.3-subgoal-action-input-form) ✅
  - [x] 2.1.3.1 基盤コンポーネント実装（DynamicFormField、バリデーション、テスト）
  - [x] 2.1.3.2 ドラッグ&ドロップ機能実装（DragDropProvider、DraggableItem、テスト）
  - [x] 2.1.3.3 一括編集機能実装
  - [x] 2.1.3.4 サブ目標編集機能実装
  - [x] 2.1.3.5 アクション編集機能実装
  - [x] 2.1.3.6 API統合実装
  - [x] 2.1.3.7 レスポンシブ対応実装
  - [x] 2.1.3.8 アクセシビリティ対応実装
  - [x] 2.1.3.9 パフォーマンス最適化実装
  - [x] 2.1.3.10 統合テスト・E2Eテスト実装
  - [x] 2.1.3.11 エラーハンドリング・セキュリティ実装
  - [x] 2.1.3.12 最終検証・コード品質確認
  - _完了: 全12タスク完了_

- [x] 2.1.4 進捗表示機能 (Spec: 2.1.4-progress-display) ✅
  - [x] 2.1.4.1 進捗計算ロジック実装
  - [x] 2.1.4.2 プログレスバーコンポーネント作成
  - [x] 2.1.4.3 色分け表示機能実装
  - [x] 2.1.4.4 アニメーション効果実装
  - [x] 2.1.4.5 進捗履歴表示機能実装
  - _完了: 全8タスク完了_

- [x] 2.1.5 編集機能 (Spec: 2.1.5-edit-functionality) ✅
  - [x] 2.1.5.1 データベーススキーマ拡張とバックエンドAPI実装
  - [x] 2.1.5.2 インライン編集機能実装（InlineEditor、MandalaCellコンポーネント拡張）
  - [x] 2.1.5.3 モーダル編集機能実装（EditModal、ConflictDialogコンポーネント）
  - [x] 2.1.5.4 変更履歴管理実装（HistoryPanelコンポーネント、履歴API）
  - [x] 2.1.5.5 状態管理・API統合・セキュリティ対策実装
  - [x] 2.1.5.6 スタイリング・パフォーマンス最適化実装
  - [x] 2.1.5.7 アクセシビリティ対応・ドキュメント作成・最終検証
  - _完了: 全17タスク完了_

#### 2.2 AI統合機能

- [x] 2.2.1 Bedrock Lambda関数実装 (Spec: 2.2.1-bedrock-lambda-function) ✅
  - [x] 2.2.1.1 プロジェクト基盤とセットアップ
  - [x] 2.2.1.2 Bedrockクライアントとモデル設定実装
  - [x] 2.2.1.3 プロンプトテンプレート機能実装
  - [x] 2.2.1.4 BedrockService実装
  - [x] 2.2.1.5 レスポンス解析機能実装
  - [x] 2.2.1.6 エラーハンドリング実装
  - [x] 2.2.1.7 Lambda Handler実装
  - [x] 2.2.1.8 セキュリティ機能実装
  - [x] 2.2.1.9 パフォーマンス最適化実装（クライアント再利用完了、Lambda設定は11で実施）
  - [x] 2.2.1.10 監視とログ実装（構造化ログ完了、カスタムメトリクス・コスト監視は5.1.1、5.1.2に移動）
  - [x] 2.2.1.11 CDKインフラ実装（Lambda設定最適化含む）
  - [x] 2.2.1.12 統合テスト実装
  - [x] 2.2.1.13 ドキュメント作成
  - [x] 2.2.1.14 最終検証とコード品質確認
  - _完了: 全14タスク完了（100%）、コア機能・ログ基盤・CDKインフラ・統合テスト・ドキュメント・最終検証すべて完了_

- [ ] 2.2.2 サブ目標生成API (Spec: 2.2.2-subgoal-generation-api) 🚧 実装中（タスク12進行中、約62%）
  - [x] 2.2.2.1 プロジェクト基盤とセットアップ
  - [x] 2.2.2.2 入力検証サービスの実装
  - [x] 2.2.2.3 サブ目標品質検証サービスの実装
  - [x] 2.2.2.4 プロンプトテンプレートの拡張（2.2.1で実装済み）
  - [x] 2.2.2.5 データベースサービスの実装
  - [x] 2.2.2.6 サブ目標生成サービスの実装
  - [x] 2.2.2.7 Lambda Handlerの実装
  - [x] 2.2.2.8 監視とログの実装
  - [x] 2.2.2.9 セキュリティ機能の実装
  - [x] 2.2.2.10 CDKインフラの実装
  - [x] 2.2.2.11 E2Eテストの実装
  - [-] 2.2.2.12 ドキュメントの作成（API仕様書作成完了、残りのドキュメント作成中）
  - [ ] 2.2.2.13 最終検証とコード品質確認

- [ ] 2.2.3 アクション生成API
  - [ ] 2.2.3.1 アクション生成エンドポイント作成
  - [ ] 2.2.3.2 サブ目標コンテキスト活用
  - [ ] 2.2.3.3 アクション種別判定機能実装
  - [ ] 2.2.3.4 重複排除機能実装
  - [ ] 2.2.3.5 品質フィルタリング実装

- [ ] 2.2.4 タスク生成API
  - [ ] 2.2.4.1 タスク生成エンドポイント作成
  - [ ] 2.2.4.2 タスク粒度調整機能実装
  - [ ] 2.2.4.3 推定時間算出機能実装
  - [ ] 2.2.4.4 タスク優先度設定機能実装
  - [ ] 2.2.4.5 タスク依存関係管理実装

- [ ] 2.2.5 非同期処理状態管理
  - [ ] 2.2.5.1 処理状態管理テーブル設計
  - [ ] 2.2.5.2 状態更新API実装
  - [ ] 2.2.5.3 進捗通知機能実装
  - [ ] 2.2.5.4 タイムアウト処理実装
  - [ ] 2.2.5.5 リトライ機能実装

#### 2.3 ユーザー管理機能

- [ ] 2.3.1 プロフィール管理API
  - [ ] 2.3.1.1 プロフィール取得API実装
  - [ ] 2.3.1.2 プロフィール更新API実装
  - [ ] 2.3.1.3 プロフィール削除API実装
  - [ ] 2.3.1.4 プロフィール検証機能実装
  - [ ] 2.3.1.5 プロフィール履歴管理実装

- [ ] 2.3.2 プロフィール入力画面（→ [5-screen-specifications.md](./5-screen-specifications.md)）
  - [ ] 2.3.2.1 プロフィール入力フォーム作成
  - [ ] 2.3.2.2 業種選択機能実装
  - [ ] 2.3.2.3 組織規模選択機能実装
  - [ ] 2.3.2.4 職種・役職入力機能実装
  - [ ] 2.3.2.5 プロフィール画像アップロード機能実装

- [ ] 2.3.3 マンダラチャート一覧画面
  - [ ] 2.3.3.1 一覧表示コンポーネント作成
  - [ ] 2.3.3.2 検索・フィルター機能実装
  - [ ] 2.3.3.3 ソート機能実装
  - [ ] 2.3.3.4 ページネーション実装
  - [ ] 2.3.3.5 カード表示・リスト表示切替実装

- [ ] 2.3.4 ダッシュボード画面
  - [ ] 2.3.4.1 ダッシュボードレイアウト作成
  - [ ] 2.3.4.2 進捗サマリー表示実装
  - [ ] 2.3.4.3 最近の活動表示実装
  - [ ] 2.3.4.4 統計情報表示実装
  - [ ] 2.3.4.5 クイックアクション機能実装

### 3. 活動機能開発

#### 3.1 タスク管理機能

- [ ] 3.1.1 タスク一覧画面
  - [ ] 3.1.1.1 タスク一覧コンポーネント作成
  - [ ] 3.1.1.2 タスクカードコンポーネント作成
  - [ ] 3.1.1.3 状態別表示機能実装
  - [ ] 3.1.1.4 期限表示・警告機能実装
  - [ ] 3.1.1.5 バルク操作機能実装

- [ ] 3.1.2 タスク詳細・更新機能
  - [ ] 3.1.2.1 タスク詳細画面作成
  - [ ] 3.1.2.2 状態更新機能実装
  - [ ] 3.1.2.3 完了時間記録機能実装
  - [ ] 3.1.2.4 メモ・コメント機能実装
  - [ ] 3.1.2.5 タスク履歴表示機能実装

- [ ] 3.1.3 フィルター・検索機能
  - [ ] 3.1.3.1 検索機能実装
  - [ ] 3.1.3.2 状態フィルター実装
  - [ ] 3.1.3.3 期限フィルター実装
  - [ ] 3.1.3.4 アクション別フィルター実装
  - [ ] 3.1.3.5 保存済み検索機能実装

- [ ] 3.1.4 進捗計算ロジック
  - [ ] 3.1.4.1 タスク進捗計算実装
  - [ ] 3.1.4.2 アクション進捗計算実装
  - [ ] 3.1.4.3 サブ目標進捗計算実装
  - [ ] 3.1.4.4 目標進捗計算実装
  - [ ] 3.1.4.5 進捗更新トリガー実装

#### 3.2 リマインド機能

- [ ] 3.2.1 SES統合
  - [ ] 3.2.1.1 SES設定・認証
  - [ ] 3.2.1.2 メールテンプレート作成
  - [ ] 3.2.1.3 送信制限・レート制御実装
  - [ ] 3.2.1.4 バウンス・苦情処理実装
  - [ ] 3.2.1.5 送信ログ・統計機能実装

- [ ] 3.2.2 メール生成機能
  - [ ] 3.2.2.1 リマインドメール生成機能実装
  - [ ] 3.2.2.2 パーソナライズ機能実装
  - [ ] 3.2.2.3 HTMLメール対応実装
  - [ ] 3.2.2.4 メール内リンク生成実装
  - [ ] 3.2.2.5 配信停止機能実装

- [ ] 3.2.3 配信スケジュール管理
  - [ ] 3.2.3.1 スケジューラー実装
  - [ ] 3.2.3.2 配信時間設定機能実装
  - [ ] 3.2.3.3 タイムゾーン対応実装
  - [ ] 3.2.3.4 配信頻度制御実装
  - [ ] 3.2.3.5 配信履歴管理実装

- [ ] 3.2.4 メール内リンク機能
  - [ ] 3.2.4.1 認証付きリンク生成実装
  - [ ] 3.2.4.2 ワンクリックアクション実装
  - [ ] 3.2.4.3 リンク有効期限管理実装
  - [ ] 3.2.4.4 クリック追跡機能実装
  - [ ] 3.2.4.5 不正アクセス防止実装

#### 3.3 Step Functions統合

- [ ] 3.3.1 ワークフロー定義
  - [ ] 3.3.1.1 Step Functions定義ファイル作成
  - [ ] 3.3.1.2 状態遷移設計
  - [ ] 3.3.1.3 エラーハンドリング定義
  - [ ] 3.3.1.4 リトライ・タイムアウト設定
  - [ ] 3.3.1.5 並列処理設定

- [ ] 3.3.2 タスク生成処理
  - [ ] 3.3.2.1 タスク生成Lambda関数実装
  - [ ] 3.3.2.2 バッチ処理機能実装
  - [ ] 3.3.2.3 処理分散機能実装
  - [ ] 3.3.2.4 進捗レポート機能実装
  - [ ] 3.3.2.5 処理結果集約機能実装

- [ ] 3.3.3 状態監視機能
  - [ ] 3.3.3.1 実行状態監視API実装
  - [ ] 3.3.3.2 進捗表示機能実装
  - [ ] 3.3.3.3 エラー通知機能実装
  - [ ] 3.3.3.4 実行履歴管理実装
  - [ ] 3.3.3.5 パフォーマンス監視実装

- [ ] 3.3.4 エラーハンドリング
  - [ ] 3.3.4.1 エラー分類・処理実装
  - [ ] 3.3.4.2 自動復旧機能実装
  - [ ] 3.3.4.3 手動介入機能実装
  - [ ] 3.3.4.4 エラーログ管理実装
  - [ ] 3.3.4.5 アラート機能実装

### 4. 完成・テスト

#### 4.1 振り返り機能

- [ ] 4.1.1 振り返り入力画面
  - [ ] 4.1.1.1 振り返りフォーム作成
  - [ ] 4.1.1.2 項目別入力機能実装
  - [ ] 4.1.1.3 自動保存機能実装
  - [ ] 4.1.1.4 テンプレート機能実装
  - [ ] 4.1.1.5 音声入力機能実装（オプション）

- [ ] 4.1.2 振り返りAPI
  - [ ] 4.1.2.1 振り返り作成API実装
  - [ ] 4.1.2.2 振り返り取得API実装
  - [ ] 4.1.2.3 振り返り更新API実装
  - [ ] 4.1.2.4 振り返り削除API実装
  - [ ] 4.1.2.5 振り返り検索API実装

- [ ] 4.1.3 履歴表示機能
  - [ ] 4.1.3.1 振り返り履歴一覧実装
  - [ ] 4.1.3.2 時系列表示機能実装
  - [ ] 4.1.3.3 比較機能実装
  - [ ] 4.1.3.4 エクスポート機能実装
  - [ ] 4.1.3.5 統計・分析機能実装

#### 4.2 テスト実装

- [ ] 4.2.1 ユニットテスト実装
  - [ ] 4.2.1.1 バックエンドユニットテスト作成
  - [ ] 4.2.1.2 フロントエンドユニットテスト作成
  - [ ] 4.2.1.3 テストカバレッジ測定設定
  - [ ] 4.2.1.4 モック・スタブ実装
  - [ ] 4.2.1.5 テストデータ管理実装

- [ ] 4.2.2 E2Eテスト実装
  - [ ] 4.2.2.1 Playwright設定
  - [ ] 4.2.2.2 主要フローテスト作成
  - [ ] 4.2.2.3 クロスブラウザテスト設定
  - [ ] 4.2.2.4 テストデータセットアップ実装
  - [ ] 4.2.2.5 テスト結果レポート設定

- [ ] 4.2.3 パフォーマンステスト
  - [ ] 4.2.3.1 負荷テストシナリオ作成
  - [ ] 4.2.3.2 パフォーマンス測定ツール設定
  - [ ] 4.2.3.3 ボトルネック特定・改善
  - [ ] 4.2.3.4 スケーラビリティテスト実施
  - [ ] 4.2.3.5 パフォーマンス監視設定

- [ ] 4.2.4 セキュリティテスト
  - [ ] 4.2.4.1 脆弱性スキャン実施
  - [ ] 4.2.4.2 認証・認可テスト実施
  - [ ] 4.2.4.3 入力検証テスト実施
  - [ ] 4.2.4.4 SQLインジェクション対策テスト
  - [ ] 4.2.4.5 XSS対策テスト実施

#### 4.3 本番デプロイ

- [ ] 4.3.1 本番環境構築
  - [ ] 4.3.1.1 本番用CDKスタック作成
  - [ ] 4.3.1.2 本番環境設定ファイル作成
  - [ ] 4.3.1.3 SSL証明書設定
  - [ ] 4.3.1.4 ドメイン設定
  - [ ] 4.3.1.5 セキュリティ設定強化

- [ ] 4.3.2 監視・ログ設定
  - [ ] 4.3.2.1 CloudWatch監視設定
  - [ ] 4.3.2.2 アラート設定
  - [ ] 4.3.2.3 ログ集約設定
  - [ ] 4.3.2.4 メトリクス収集設定
  - [ ] 4.3.2.5 ダッシュボード作成

- [ ] 4.3.3 ドキュメント整備
  - [ ] 4.3.3.1 API仕様書作成
  - [ ] 4.3.3.2 運用手順書作成
  - [ ] 4.3.3.3 トラブルシューティングガイド作成
  - [ ] 4.3.3.4 ユーザーマニュアル作成
  - [ ] 4.3.3.5 開発者ドキュメント整備

## 関連ドキュメント

### データベース設計

- [6-database-design.md](./6-database-design.md) - ER図とテーブル定義

### 画面設計

- [5-screen-specifications.md](./5-screen-specifications.md) - 画面一覧と画面遷移図

## 将来の拡張・改善タスク

このセクションには、MVP完成後に実装する拡張機能や改善タスクを記載します。

### 5. 将来の拡張機能

#### 5.1 AI機能の拡張

- [ ] 5.1.1 カスタムメトリクス実装（2.2.1から移動）
  - [ ] 5.1.1.1 CloudWatchカスタムメトリクス送信実装
  - [ ] 5.1.1.2 成功/失敗カウント記録
  - [ ] 5.1.1.3 処理時間の記録
  - [ ] 5.1.1.4 トークン使用量の記録
  - [ ] 5.1.1.5 テスト実装
  - _元タスク: 2.2.1のタスク10.3_

- [ ] 5.1.2 コスト監視実装（2.2.1から移動）
  - [ ] 5.1.2.1 トークン使用量の計算
  - [ ] 5.1.2.2 コスト推定ロジック実装
  - [ ] 5.1.2.3 月次予算チェック機能
  - [ ] 5.1.2.4 コストアラート設定
  - [ ] 5.1.2.5 テスト実装
  - _元タスク: 2.2.1のタスク10.4_

- [ ] 5.1.3 プロンプト最適化（2.2.1から移動）
  - [ ] 5.1.3.1 不要なトークンの削減
  - [ ] 5.1.3.2 効率的なプロンプト構造の設計
  - [ ] 5.1.3.3 A/Bテスト機能の実装
  - [ ] 5.1.3.4 テスト実装
  - _元タスク: 2.2.1のタスク9.3_

- [ ] 5.1.4 複数モデル対応
  - [ ] 5.1.4.1 Claude対応
  - [ ] 5.1.4.2 GPT対応
  - [ ] 5.1.4.3 モデル選択機能
  - [ ] 5.1.4.4 モデル別プロンプト最適化
  - [ ] 5.1.4.5 テスト実装

- [ ] 5.1.5 ストリーミングレスポンス対応
  - [ ] 5.1.5.1 Bedrock Streaming API統合
  - [ ] 5.1.5.2 WebSocket対応
  - [ ] 5.1.5.3 フロントエンド統合
  - [ ] 5.1.5.4 テスト実装

- [ ] 5.1.6 多言語対応
  - [ ] 5.1.6.1 英語プロンプトテンプレート作成
  - [ ] 5.1.6.2 中国語プロンプトテンプレート作成
  - [ ] 5.1.6.3 言語検出機能
  - [ ] 5.1.6.4 テスト実装

#### 5.2 パフォーマンス改善

- [ ] 5.2.1 RDS Proxy導入
  - [ ] 5.2.1.1 RDS Proxy設定
  - [ ] 5.2.1.2 接続プール最適化
  - [ ] 5.2.1.3 パフォーマンステスト
  - [ ] 5.2.1.4 コスト分析

- [ ] 5.2.2 レスポンスキャッシュ実装
  - [ ] 5.2.2.1 キャッシュ戦略の設計
  - [ ] 5.2.2.2 ElastiCache統合
  - [ ] 5.2.2.3 キャッシュ無効化ロジック
  - [ ] 5.2.2.4 テスト実装

- [ ] 5.2.3 Lambda Provisioned Concurrency
  - [ ] 5.2.3.1 コールドスタート分析
  - [ ] 5.2.3.2 Provisioned Concurrency設定
  - [ ] 5.2.3.3 コスト分析
  - [ ] 5.2.3.4 パフォーマンステスト

#### 5.3 運用改善

- [ ] 5.3.1 自動デプロイパイプライン
  - [ ] 5.3.1.1 GitHub Actions完全自動化
  - [ ] 5.3.1.2 カナリアデプロイ実装
  - [ ] 5.3.1.3 ブルーグリーンデプロイ実装
  - [ ] 5.3.1.4 自動ロールバック機能

- [ ] 5.3.2 詳細な監視ダッシュボード
  - [ ] 5.3.2.1 CloudWatchダッシュボード作成
  - [ ] 5.3.2.2 カスタムメトリクスの可視化
  - [ ] 5.3.2.3 コスト可視化
  - [ ] 5.3.2.4 アラート履歴の可視化

- [ ] 5.3.3 生成品質評価機能
  - [ ] 5.3.3.1 品質評価指標の定義
  - [ ] 5.3.3.2 自動品質チェック機能
  - [ ] 5.3.3.3 ユーザーフィードバック収集
  - [ ] 5.3.3.4 品質レポート生成

## 注記

- タスク2.2.1.10の一部（CloudWatchカスタムメトリクス実装とコスト監視実装）は、MVP完成後の拡張機能として5.1.1と5.1.2に移動しました
- タスク2.2.1.9の一部（プロンプト最適化）は、MVP完成後の改善タスクとして5.1.3に移動しました
- これらの機能は重要ですが、基本的なAI生成機能の動作には必須ではないため、優先度を下げました
- 構造化ログとCloudWatchアラームは実装済みで、基本的な監視体制は整っています
