# ドキュメント管理ガイド

## 概要

このドキュメントは、プロジェクトのドキュメント管理に関するベストプラクティスと、docs配下のドキュメントを.kiro/steeringに統合した際の学びをまとめたものです。

## ドキュメント管理の基本方針

### ドキュメントの一元管理

- **ステアリングファイルへの統合**: プロジェクト固有のドキュメントは`.kiro/steering`ディレクトリに統合する
- **重複の排除**: 同じ情報を複数の場所に記載しない
- **単一の情報源**: 各トピックについて、信頼できる単一の情報源を維持する

### ドキュメントの分類

#### ステアリングファイル（.kiro/steering）

プロジェクト全体に関わる重要なドキュメントを配置：

- **1-product-overview.md**: プロダクト概要
- **2-technology-stack.md**: 技術スタック
- **3-development-roadmap.md**: 開発ロードマップ
- **4-wbs.md**: WBS（Work Breakdown Structure）
- **5-screen-specifications.md**: 画面仕様
- **6-database-design.md**: データベース設計
- **7-implementation-guide.md**: 実装ガイド
- **8-security-guide.md**: セキュリティガイド
- **9-test-guide.md**: テストガイド
- **10-aws-guide.md**: AWS利用ガイド
- **11-react-hooks-best-practices.md**: React Hooksベストプラクティス
- **12-documentation-management.md**: ドキュメント管理ガイド（本ファイル）
- **99-spec.md**: Spec作成ガイド

#### パッケージ固有のドキュメント（packages/*/docs）

各パッケージに固有の技術的なドキュメントを配置：

- **API仕様書**: エンドポイント、リクエスト/レスポンス形式
- **エラーコード一覧**: エラーコードと対処方法
- **運用ガイド**: デプロイ、監視、トラブルシューティング
- **トラブルシューティングガイド**: よくある問題と解決方法

#### README.md

- **一般利用者向け**: プロダクトの概要、使い方
- **開発者向けの基本情報**: セットアップ方法、開発ツールの使い方

#### CONTRIBUTING.md

- **開発者向けの詳細情報**: セットアップ方法、開発ツールの使い方、開発者用コマンド

## ドキュメント統合のベストプラクティス

### 統合前の準備

1. **ドキュメントの棚卸し**
   - 既存のドキュメントをすべてリストアップ
   - 各ドキュメントの内容と目的を分析
   - 重複や矛盾を特定

2. **統合先の決定**
   - 既存のステアリングファイルとの関連性を評価
   - 新規ファイル作成または既存ファイルへの追加を判断
   - 統合計画を作成

### 統合作業

1. **セクション単位での統合**
   - 関連する内容をセクションとしてまとめる
   - 見出しレベルを統一する
   - 目次を追加して可読性を向上

2. **重複内容の整理**
   - より詳細で最新の情報を保持
   - 矛盾する情報は実装済みコードと整合性を確認
   - 情報の一貫性を保証

3. **参照の更新**
   - README.mdやCONTRIBUTING.mdからの参照を更新
   - 内部リンクを修正
   - リンク切れを防止

### 統合後の検証

1. **Markdown形式の検証**
   - 全てのステアリングファイルが正しいMarkdown形式であることを確認
   - 見出しレベルの整合性を確認

2. **内部リンクの検証**
   - ドキュメント内のリンクが正しく機能することを確認
   - 相対パスが正しいことを確認

3. **情報の完全性確認**
   - 統合前のドキュメントの情報が全て保持されていることを確認
   - 重要な手順やコマンドが欠落していないことを確認

4. **コード品質チェック**
   - `npm run format`を実行
   - `npm run lint`を実行してエラーと警告がゼロ件であることを確認

## docs配下のドキュメント統合の実例

### 統合したドキュメント

#### 7-implementation-guide.mdへの統合

**Docker環境セクション**:
- docker-setup-guide.md
- docker-optimization.md
- docker-troubleshooting.md

**GitHub設定セクション**:
- github-branch-protection.md
- github-secrets-setup.md
- husky-setup.md

**CI/CD設定セクション**:
- ci-version-settings.md

**環境変数管理セクション**:
- environment-variables.md

#### 9-test-guide.mdへの統合

**テスト戦略セクション**:
- testing-strategy.md
- test-execution-rules.md

**統合テストセクション**:
- integration-testing.md
- integration-test-implementation.md

**SAMテストセクション**:
- sam-integration-test-results.md

#### 6-database-design.mdへの統合

**マイグレーション管理セクション**:
- migration-guide.md

#### 2-technology-stack.mdへの統合

**モノレポ構成詳細セクション**:
- monorepo-architecture.md

### 統合の成果

1. **ドキュメントの一元化**
   - docs配下の14ファイルを4つのステアリングファイルに統合
   - 情報の重複を排除
   - 検索性の向上

2. **保守性の向上**
   - 更新箇所が明確になった
   - 矛盾する情報が減少
   - ドキュメントの品質が向上

3. **開発効率の向上**
   - 必要な情報にすぐにアクセスできる
   - ドキュメントの更新が容易になった
   - 新規メンバーのオンボーディングが効率化

## ドキュメント更新のワークフロー

### 新しいドキュメントの追加

1. **追加先の決定**
   - 既存のステアリングファイルに追加できるか検討
   - 新規ファイルが必要か判断

2. **ドキュメントの作成**
   - Markdown形式で作成
   - 見出しレベルを統一
   - 内部リンクを適切に設定

3. **レビューと承認**
   - チームメンバーによるレビュー
   - 内容の正確性を確認
   - マージ

### 既存ドキュメントの更新

1. **更新箇所の特定**
   - 変更が必要な箇所を特定
   - 影響範囲を確認

2. **ドキュメントの更新**
   - 最新の情報に更新
   - 関連する箇所も確認

3. **検証**
   - 内部リンクの確認
   - コード品質チェック

## トラブルシューティング

### よくある問題

**問題1: ドキュメントが見つからない**

原因: ドキュメントの配置場所が不明確

解決方法:
- ステアリングファイルの目次を確認
- README.mdやCONTRIBUTING.mdから参照をたどる
- grepコマンドで検索

**問題2: 情報が重複している**

原因: 複数の場所に同じ情報が記載されている

解決方法:
- より詳細で最新の情報を保持
- 他の箇所からリンクで参照
- 重複を削除

**問題3: 情報が古い**

原因: ドキュメントの更新が追いついていない

解決方法:
- 実装済みコードと整合性を確認
- 最新の情報に更新
- 更新日時を記録

## まとめ

ドキュメント管理は、プロジェクトの成功に不可欠な要素です。このガイドに従って、ドキュメントを適切に管理し、チーム全体の生産性を向上させましょう。

### 重要なポイント

1. **一元管理**: ドキュメントは`.kiro/steering`に統合する
2. **重複排除**: 同じ情報を複数の場所に記載しない
3. **定期的な更新**: ドキュメントを常に最新の状態に保つ
4. **品質チェック**: フォーマットとリントを実行する
5. **チームでの共有**: ドキュメント管理のベストプラクティスをチーム全体で共有する
